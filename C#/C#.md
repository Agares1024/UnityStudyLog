# C#åŸºç¡€

### å˜é‡

1ã€æ— ç¬¦å·
byte ushort uint ulong
æœ‰ç¬¦å·
//sbyte
short
int long
æµ®ç‚¹æ•°
//float
double decimal
ç‰¹æ®Š
char bool string




å¤æ‚æ•°æ®ç±»å‹

æšä¸¾ï¼šæ•´å½¢å¸¸é‡çš„é›†åˆï¼Œå¯ä»¥è‡ªå®šä¹‰
æ•°ç»„ï¼šä»»æ„å˜é‡ç±»å‹é¡ºåºå­˜å‚¨çš„æ•°æ®
ç»“æ„ä½“ï¼šä»»æ„å˜é‡çš„æ•°æ®é›†åˆï¼Œå¯ä»¥è‡ªå®šä¹‰

### æšä¸¾

ä¸€ä¸ªè¢«å‘½åçš„æ•´å½¢å¸¸é‡çš„é›†åˆ,ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºçŠ¶æ€ï¼Œç±»å‹ç­‰ç­‰

ä½œç”¨ï¼šå¯ä»¥ç”¨æ¥è¡¨ç¤ºç©å®¶å½“å‰å¤„äºå“ªç§çŠ¶æ€ï¼Œå¾…æœºï¼Œè¡Œèµ°ï¼Œå¥”è·‘ï¼Œæ”»å‡»ç­‰ï¼Œå¯ä»¥æ¸…æ™°çš„åˆ†æ¸…çŠ¶æ€å«ä¹‰

PSï¼šè¦å£°æ˜åœ¨namespaceè¯­å¥å—æˆ–classè¯­å¥å—ä¸­ï¼Œä¸èƒ½å†å‡½æ•°è¯­å¥å—ä¸­å£°æ˜

```c#
//å£°æ˜æšä¸¾
    enum E_xxx  //å‘½åè§„èŒƒ
    {
        enum1,  //æšä¸¾ä¸­çš„æ•´å½¢å¸¸é‡
        enum2	//ç¬¬ä¸€ä¸ªé»˜è®¤å€¼æ˜¯0ï¼Œå½“æšä¸¾é¡¹è¢«èµ‹å€¼è¿‡åï¼Œåé¢çš„ä¼šåœ¨ä¸Šä¸€ä¸ªçš„åŸºç¡€ä¸Šä¾æ¬¡ç´¯åŠ 
    }

//å£°æ˜æšä¸¾å˜é‡  è‡ªå®šä¹‰æšä¸¾ç±»å‹ å˜é‡å = é»˜è®¤å€¼
	E_xxx xxx = E_xxx.enum1; 

//æšä¸¾ ä¸ switch å…±åŒä½¿ç”¨ï¼Œæ–¹ä¾¿åˆ¶ä½œé€»è¾‘
    switch(xxx)
    {
        case E_xxx.enum1:
            //é€»è¾‘
            break;
        case E_xxx.enum2:
            //é€»è¾‘
            break;
        default:
            //é€»è¾‘
            break;
    }

//æšä¸¾çš„ç±»å‹è½¬æ¢
    //æšä¸¾è½¬int
    int i = (int)æšä¸¾å˜é‡;  
    //æšä¸¾è½¬å­—ç¬¦ä¸²
    string str = æšä¸¾å˜é‡.ToString();  
    //å­—ç¬¦ä¸²è½¬æšä¸¾
    str = (å¼ºè½¬çš„ç›®æ ‡æšä¸¾ç±»å‹E_xxx)Enum.Parse(typeof(è½¬æ¢çš„æšä¸¾ç±»å‹E_xxx),"è½¬æ¢çš„å¯¹åº”æšä¸¾é¡¹å­—ç¬¦ä¸²ï¼ˆenum1ï¼‰");  

```



### äº¤é”™æ•°ç»„

äº¤é”™æ•°ç»„æ˜¯ç”±å¤šä¸ªé•¿åº¦ä¸åŒçš„ä¸€ç»´æ•°ç»„ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦å¯ä»¥ä¸åŒ

åŒºåˆ«ï¼šäºŒç»´æ•°ç»„çš„æ¯è¡Œåˆ—æ•°ç›¸åŒï¼Œäº¤é”™æ•°ç»„æ¯è¡Œçš„åˆ—æ•°å¯èƒ½ä¸åŒ

```c#
int[][] arr = new int[[1,2,3],[4,5],[6]];  //äº¤é”™æ•°ç»„
int[][] arr = new int[[1,2,3],[4,5,6]];  //äºŒç»´æ•°ç»„
```



### å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹

å€¼ç±»å‹ï¼šç»“æ„ä½“ï¼Œå…¶ä»–

å¼•ç”¨ç±»å‹ï¼šstringï¼Œæ•°ç»„ï¼Œç±» ï¼Œå€¼ç±»å‹çš„é›†åˆ

```C#
int a = 10;  //å£°æ˜ä¸€ä¸ªå€¼ç±»å‹
int[] arr = new int[] {1,2,3};  //å£°æ˜ä¸€ä¸ªå¼•ç”¨ç±»å‹

int b = a;  //æ­¤æ—¶a==10,b==10ï¼Œarr[0]==1,arr2[0]==1
int[] arr2 = arr;

//èµ‹å€¼
b = 20;  //æ­¤æ—¶a==10,b==20ï¼Œarr[0]==10,arr2[0]==10
arr[0] = 10;

//å€¼ç±»å‹ åœ¨ç›¸äº’èµ‹å€¼æ—¶ï¼Œä¼šå°†å†…å®¹æ‹·è´ç»™å¯¹æ–¹ï¼Œå®ƒå˜æˆ‘ä¸å˜
//å¼•ç”¨ç±»å‹ ç›¸äº’èµ‹å€¼ï¼Œæ˜¯è®©ä¸¤è€…æŒ‡å‘åŒä¸€ä¸ªå€¼ï¼Œå®ƒå˜æˆ‘ä¹Ÿå˜
    
//å› ä¸ºå­˜å‚¨æ–¹å¼çš„ä¸åŒé€ æˆäº†ä½¿ç”¨ä¸Šçš„åŒºåˆ«
    //å€¼ç±»å‹å­˜å‚¨åœ¨æ ˆç©ºé—´ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œè‡ªåŠ¨å›æ”¶ï¼Œå°è€Œå¿«
    //å¼•ç”¨ç±»å‹å­˜å‚¨åœ¨å †ç©ºé—´ï¼Œæ‰‹åŠ¨ç”³è¯·æ‰‹åŠ¨é‡Šæ”¾ï¼Œå¤§è€Œæ…¢
    //å€¼ç±»å‹æ‹·è´ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“è¢«æ‹·è´çš„åŸå†…å®¹
	//å¼•ç”¨ç±»å‹æ˜¯ç›´æ¥æ‹·è´åœ°å€ï¼ŒæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¿®æ”¹çš„ä¹Ÿå°±æ˜¯å †ç©ºé—´é‡Œçš„åŒä¸€ä¸ªå†…å®¹
    
//ç‰¹æ®Šå¼•ç”¨ç±»å‹string
    //å…·å¤‡å€¼ç±»å‹çš„ç‰¹å¾ å®ƒå˜æˆ‘ä¸å˜
    //stringåœ¨é‡æ–°èµ‹å€¼æ—¶ä¼šåœ¨å †é‡Œå¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œé‡æ–°æŒ‡å‘æ–°å»ºçš„é‚£ä¸ªæˆ¿é—´ï¼ŒåŸæœ¬çš„æˆ¿é—´å°±å¤±å»ä½œç”¨å˜æˆåƒåœ¾ï¼Œæ‰€ä»¥åå¤å¯¹stringèµ‹å€¼ä¼šäº§ç”Ÿå†…å­˜åƒåœ¾
```



### refã€out å…³é”®å­—

```C#
//ä½œç”¨ï¼šå½“ä¼ å…¥çš„å€¼å‚æ•°åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹æ—¶ï¼Œæˆ–è€…å¼•ç”¨ç±»å‹å‚æ•°åœ¨å†…éƒ¨é‡æ–°å£°æ˜æ—¶ï¼Œè®©å¤–éƒ¨çš„å€¼ä¹Ÿèƒ½å‘ç”Ÿå˜åŒ–
static void Xxx(ref int value,ref int[] arr)
{
    value = 6;
    arr = new int[] {1,2,3}
}
Xxx(ref val,ref arr)

//refä¼ å…¥çš„å˜é‡å¿…é¡»åˆå§‹åŒ–ï¼Œoutä¸ç”¨   ç±»ä¼¼ä¹°ç¥¨ä¸Šè½¦å’Œä¸Šè½¦ä¹°ç¥¨
//outä¼ å…¥çš„å˜é‡å¿…é¡»åœ¨å†…éƒ¨èµ‹å€¼ï¼Œrefä¸ç”¨

```



### Paramsï¼šå˜é•¿å‚æ•° 

å¯ä»¥ä¼ å…¥å¤šä¸ªåŒç±»å‹å‚æ•°

```C#
static int Sum(params int[] arr)
{
    int sum = 0;
    for(int i = 0;i<arr.Length;i++)
        sum += arr[i]
    return sum
}
Sum();
Sum(1,2,3,4,5,6)
//params int[] æ„å‘³ç€å¯ä»¥ä¼ å…¥nä¸ªintå‚æ•°ï¼Œnå¯ä»¥å¤§äº0ï¼Œä¼ å…¥çš„å‚æ•°ä¼šå­˜åœ¨arræ•°ç»„ä¸­ï¼Œ
//paramså…³é”®å­—åé¢å¿…é¡»æ˜¯æ•°ç»„ï¼Œæ•°ç»„ç±»å‹ä»»æ„
//paramså¯ä»¥ä¸å…¶ä»–å‚æ•°ä¸€èµ·ä½¿ç”¨
//å‡½æ•°å‚æ•°æœ€å¤šå‡ºç°ä¸€ä¸ªparamsï¼Œå¹¶ä¸”å¿…é¡»æ˜¯åœ¨æœ€åä¸€ç»„å‚æ•°ï¼Œå‰é¢å¯ä»¥æœ‰nä¸ªå‚æ•°
```



### å¯é€‰å‚æ•°ï¼šå‚æ•°é»˜è®¤å€¼

ä½œç”¨ï¼šå¯ä»¥ç»™å‚æ•°é»˜è®¤å€¼ï¼Œä½¿ç”¨æ—¶å¯ä»¥ä¸ä¼ å‚ï¼Œä¸ä¼ ç”¨é»˜è®¤å€¼ï¼Œä¼ äº†å°±ç”¨ä¼ çš„

```C#
static void Xxx(string str = "æˆ‘çˆ±å­¦ä¹ ")
{
    ...
}
//æ”¯æŒå¤šå‚æ•°é»˜è®¤å€¼
//å¦‚æœå­˜åœ¨æ™®é€šå‚æ•°ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°è¦å†™åœ¨æœ€åé¢
```



### é€’å½’

å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±

```C#
//å¿…é¡»æœ‰ç»“æŸè°ƒç”¨çš„æ¡ä»¶
//ç”¨äºæ¡ä»¶åˆ¤æ–­çš„æ¡ä»¶å¿…é¡»æ”¹å˜ï¼Œèƒ½å¤Ÿåœæ­¢é€’å½’
static void Func()
{
    Func();
}
```



### ç»“æ„ä½“

æ˜¯å€¼ç±»å‹

```C#
//ç»“æ„ä½“æ˜¯ä¸€ç§è‡ªå®šä¹‰å˜é‡ç±»å‹ï¼Œæ˜¯æ•°æ®å’Œå‡½æ•°çš„é›†åˆï¼Œåœ¨ç»“æ„ä½“ä¸­å¯ä»¥å£°æ˜å„ç§å˜é‡å’Œè¯­æ³•
//ç›´æ¥å†™åœ¨namespaceä¸‹

struct XXX
{
   	//å˜é‡
    int name;  //ç»“æ„ä½“ä¸­å£°æ˜çš„å˜é‡ä¸èƒ½ç›´æ¥åˆå§‹åŒ–ï¼Œå¯ä»¥å†™ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬ç»“æ„ä½“ï¼Œä½†ä¸èƒ½æ˜¯è‡ªå·±çš„ç»“æ„ä½“
    //å‡½æ•°  ä¸ç”¨åŠ static
    void Func()
    {
        ...
    }
}
```



### Sort æ’åº

```C#
int[] arr = new int[]{1,5,8,3}
//ä»å°åˆ°å¤§ï¼Œä¸¤ç§å†™æ³•
arr.Sort();
Array.Sort(arr);

//ä»å¤§åˆ°å°
arr.Sort();
arr.Reverse(); //æ’åºååè½¬
```



### å†’æ³¡æ’åº

```C#
// å¤–å±‚å¾ªç¯ï¼šéœ€è¦è¿›è¡Œn-1æ¬¡å†’æ³¡æ“ä½œ
for (int i = 0; i < len - 1; i++)
{
    // å†…å±‚å¾ªç¯ï¼šæ¯æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªæ•°ï¼Œå¦‚æœå‰ä¸€ä¸ªæ•°æ¯”åä¸€ä¸ªæ•°å¤§ï¼Œåˆ™äº¤æ¢å®ƒä»¬çš„ä½ç½®
    for (int j = 0; j < len - i - 1; j++) 
    {
        if (nums[j] > nums[j + 1])
        {
            int temp = nums[j];
            nums[j] = nums[j + 1];
            nums[j + 1] = temp;
        }
    }
}
```



### é€‰æ‹©æ’åº

ä¼šæ–°å»ºä¸€ä¸ªä¸­é—´å•†ï¼Œä»å¤´éå†åˆ°å°¾ï¼Œæ‰¾å‡ºæå€¼ï¼ˆæœ€å¤§æˆ–æœ€å°ï¼‰ï¼Œå’Œå½“å‰ä¸€è½®çš„æœ€åä¸€ä¸ªä½ç½®äº¤æ¢

ä¸­é—´å•†ç”¨æ¥è®°å½•ç´¢å¼•ï¼Œæ¯ä¸€è½®å¼€å§‹ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªæ˜¯æå€¼ï¼Œç„¶åä¾æ¬¡æ¯”è¾ƒï¼Œæ‰¾åˆ°æœ€å¤§å€¼çš„ç´¢å¼•ï¼Œå­˜å‚¨åœ¨ä¸­é—´å•†ä¸­ï¼Œç„¶åä¸å½“å‰è½®çš„æœ€åä¸€ä¸ªä½ç½®äº¤æ¢

```C#
for(int j = 0; j < arr.Length; j++)  //æ¯”è¾ƒjè½®
{
    int index = 0;  //ä¸­é—´å•†åˆå§‹ç´¢å¼•
    //å¼€å§‹æ¯”è¾ƒ,arr.Length-j:æ’é™¤ä¸Šä¸€è½®å·²ç»æ”¾ç½®å¥½çš„æ•°
    for(int i = 1; i < arr.Length - j; i++)
    {
        if(arr[index] < arr[i])  //æ‰¾å‡ºæå€¼
            index = n
    }
    //å½“å‰æå€¼ä¸å¤„äºç›®æ ‡ä½ç½®æ—¶è¿›è¡Œäº¤æ¢
    if(index != arr.Length - 1 - j)
    {
        int temp = arr[index];
        arr[index] = arr[arr.Length-1-m];
        arr[arr.Length-1-m] = temp;
    }
}

//å‡åº
for (int i = 0; i < lst.Count - 1; i++)
{
    var minIndex = i;
    for (int j = i+1; j < lst.Count; j++)
    {
        if (lst[j] < lst[minIndex])
        {
            minIndex = j;
        }
    }

    int temp = lst[minIndex];
    lst[minIndex] = lst[i];
    lst[i] = temp;
}
```





# C#æ ¸å¿ƒï¼šé¢å‘å¯¹è±¡



## 1ã€å°è£…

### ç±»ä¸å¯¹è±¡

```C#
class Person  //ç±»å£°æ˜ï¼Œå¼•ç”¨ç±»å‹
{
    Person p1;  //æ ˆä¸Šæœ‰åœ°å€ï¼Œå †æ²¡æœ‰åˆ†é…å†…å­˜
    Person p2 = null;  //ç­‰åŒäºä¸Šä¸€å¥ï¼Œnullçš„æ„æ€æ˜¯ä¸åˆ†é…å †å†…å­˜ï¼Œè€Œä¸æ˜¯å°†å †å†…å­˜çš„ä¸œè¥¿å˜ä¸ºç©ºï¼Œåªæ˜¯ä¿®æ”¹åœ°å€ï¼Œä¸ä¿®æ”¹å¯¹è±¡
    Person p3 = new Person();  //ç±»å¯¹è±¡å£°æ˜ï¼Œå®ä¾‹åŒ–å¯¹è±¡
}
```



### æˆå‘˜å˜é‡å’Œè®¿é—®ä¿®é¥°ç¬¦

ç”¨æ¥æè¿°å¯¹è±¡çš„ç‰¹å¾

```C#
class Person
{
    string name = "oo";  
    Person p;  //å£°æ˜å’Œè‡ªå·±åŒç±»å‹çš„æˆå‘˜å˜é‡æ—¶ï¼Œä¸èƒ½åˆå§‹åŒ–ï¼Œè´Ÿè´£ä¼šé€ æˆé€’å½’å¯¼è‡´å†…å­˜æº¢å‡º
}

//è®¿é—®ä¿®é¥°ç¬¦
//public å…¬å…±çš„ å†…å¤–éƒ¨éƒ½èƒ½è®¿é—®ä½¿ç”¨
//private ç§æœ‰çš„ å†…éƒ¨æ‰èƒ½ä½¿ç”¨
//protected ä¿æŠ¤çš„ å†…éƒ¨å’Œå­ç±»å¯ä»¥
//internal ç¨‹åºé›†è®¿é—®ï¼Œåªèƒ½åœ¨å½“å‰ç¨‹åºé›†ä¸­è®¿é—®

//å¾—åˆ°æŸä¸ªç±»å‹çš„é»˜è®¤å€¼
default(int)  //å¾—åˆ°intç±»å‹çš„é»˜è®¤å€¼ 0
```



### æ„é€ å‡½æ•°

åœ¨å®ä¾‹åŒ–å¯¹è±¡æ—¶ä¼šè°ƒç”¨çš„ç”¨äºåˆå§‹åŒ–çš„å‡½æ•°ï¼Œå¦‚æœä¸å†™é»˜è®¤å­˜åœ¨ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°

**æ„é€ å‡½æ•°çš„å†™æ³•ï¼š**

1.æ²¡æœ‰è¿”å›å€¼
2.å‡½æ•°åå’Œç±»åå¿…é¡»ç›¸åŒ
3.æ²¡æœ‰ç‰¹æ®Šéœ€æ±‚æ—¶ä¸€èˆ¬éƒ½æ˜¯public
4.æ„é€ å‡½æ•°å¯ä»¥è¢«é‡è½½
5.thisä»£è¡¨å½“å‰è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡è‡ªå·±

PSï¼šå¦‚æœä¸è‡ªå·±å®ç°æ— å‚æ„é€ å‡½æ•°è€Œå®ç°äº†æœ‰å‚æ„é€ å‡½æ•°ï¼Œä¼šå¤±å»é»˜è®¤çš„æ— å‚æ„é€ 

```C#
class Person
{
    public string name;
    public int age;
    
    //ç±»ä¸­å…è®¸è‡ªå·±å£°æ˜æ— å‚æ„é€ å‡½æ•°ï¼Œä¼šé¡¶æ›¿é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°
    public Person(string name,int age)
    {
        ...;
    }
    
    //æ„é€ å‡½æ•°ç‰¹æ®Šå†™æ³•
    //é€šè¿‡this é‡ç”¨æ„é€ å‡½æ•°ä»£ç 
    //å†™æ³•ï¼šè®¿é—®ä¿®é¥°ç¬¦ å‡½æ•°å(å‚æ•°):this(å‚æ•°)
    //:this() ä¼šè°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæœ€å…ˆæ‰§è¡Œ
    public Person(string name,int age):this()
    {
        ...;
    }
    
    //ä¼šä¼˜å…ˆè°ƒç”¨å¸¦æœ‰ä¸€ä¸ªageå‚æ•°çš„æ„é€ å‡½æ•°åå†æ‰§è¡Œå½“å‰å‡½æ•°é€»è¾‘
    public Person(string name,int age):this(age){...}
    
    //å¯ä»¥ç›´æ¥å†™å¸¸é‡ï¼Œä¼šè‡ªåŠ¨åŒ¹é…ç±»å‹ä¸€ç›´çš„æ„é€ å‡½æ•°
    public Person(string name,int age):this(18){...}
    
}
```



### ææ„å‡½æ•°

å½“å¼•ç”¨ç±»å‹çš„å †å†…å­˜è¢«å›æ”¶æ—¶ï¼Œä¼šè°ƒç”¨è¯¥å‡½æ•°

å¯¹äºéœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„è¯­è¨€ï¼ˆæ¯”å¦‚C++)ï¼Œéœ€è¦åœ¨ææ„å‡½æ•°ä¸­åšä¸€äº›å†…å­˜å›æ”¶å¤„ç†
ä½†æ˜¯C#ä¸­å­˜åœ¨è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶GCï¼Œæ‰€ä»¥å‡ ä¹ä¸ä¼šä½¿ç”¨ææ„å‡½æ•°ï¼Œé™¤éä½ æƒ³åœ¨æŸä¸€ä¸ªå¯¹åƒè¢«åƒåœ¾å›æ”¶æ—¶ï¼Œåšä¸€äº›ç‰¹æ®Šå¤„ç†

```C#

public Person(){}

//å½“å¼•ç”¨ç±»å‹çš„å †å†…å­˜åƒåœ¾è¢«å›æ”¶æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å‡½æ•°
~Person()  //æ— è®¿é—®ä¿®é¥°ç¬¦ï¼Œæ— å‚æ•°ï¼Œæ— è¿”å›å€¼
{
    ...
}

static void Main(string[] args)
{
    Person p = new Person();
    p = null;  //æ­¤æ—¶pæ ˆä¸å †çš„è”ç³»æ–­å¼€ï¼ŒåŸæœ¬å †å¼€è¾Ÿçš„ç©ºé—´å˜æˆåƒåœ¾ï¼Œä½†ä¾ç„¶ä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œåªæœ‰åƒåœ¾è¢«å›æ”¶æ—¶æ‰ä¼šè°ƒç”¨
}
```



### åƒåœ¾å›æ”¶æœºåˆ¶GC

![GC](D:\03-è‡ªå­¦\C#\GC.png)

##### å †ï¼ˆHeapï¼‰ æ ˆï¼ˆstackï¼‰

åƒåœ¾å›æ”¶çš„è¿‡ç¨‹æ˜¯åœ¨éå†å †(Heap)ä¸ŠåŠ¨æ€åˆ†é…çš„æ‰€æœ‰å¯¹è±¡
é€šè¿‡è¯†åˆ«å®ƒä»¬æ˜¯å¦è¢«å¼•ç”¨æ¥ç¡®å®šå“ªäº›å¯¹åƒæ˜¯åƒåœ¾ï¼Œå“ªäº›å¯¹åƒä»è¦è¢«ä½¿ç”¨
æ‰€è°“çš„åƒåœ¾å°±æ˜¯æ²¡æœ‰è¢«ä»»ä½•å˜é‡ï¼Œå¯¹åƒå¼•ç”¨çš„å†…å®¹

æ³¨æ„ï¼š
GCåªè´Ÿè´£å †(Heap)å†…å­˜çš„åƒåœ¾å›æ”¶
å¼•ç”¨ç±»å‹éƒ½æ˜¯å­˜åœ¨å †(Heap)ä¸­çš„ï¼Œæ‰€ä»¥å®ƒçš„åˆ†é…å’Œé‡Šæ”¾éƒ½é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶æ¥ç®¡ç†
æ ˆ(Stack)ä¸Šçš„å†…å­˜æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†çš„ï¼Œä¼šè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾



C#ä¸­å†…å­˜å›æ”¶æœºåˆ¶çš„å¤§æ¦‚åŸç†
0ä»£å†…å­˜
1ä»£å†…å­˜
2ä»£å†…å­˜
ä»£çš„æ¦‚å¿µï¼š
ä»£æ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ä½¿ç”¨çš„ä¸€ç§ç®—æ³•ï¼ˆåˆ†ä»£ç®—æ³•ï¼‰
æ–°åˆ†é…çš„å¯¹åƒéƒ½ä¼šè¢«é…ç½®åœ¨ç¬¬0ä»£å†…å­˜ä¸­
æ¯æ¬¡åˆ†é…éƒ½å¯èƒ½ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ä»¥é‡Šæ”¾å†…å­˜ï¼ˆ0ä»£å†…å­˜æ»¡æ—¶ï¼‰
åœ¨ä¸€æ¬¡å†…å­˜å›æ”¶è¿‡ç¨‹å¼€å§‹æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šè®¤ä¸ºå †ä¸­å…¨æ˜¯åƒåœ¾ï¼Œ
ä¼šè¿›è¡Œä»¥ä¸‹ä¸¤æ­¥
1.æ ‡è®°å¯¹åƒä»æ ¹ï¼ˆé™æ€å­—æ®µã€æ–¹æ³•å‚æ•°ï¼‰å¼€å§‹æ£€æŸ¥å¼•ç”¨å¯¹åƒï¼Œ
æ ‡è®°åä¸ºå¯è¾¾å¯¹åƒï¼Œæœªæ ‡è®°ä¸ºä¸å¯è¾¾å¯¹è±¡
ä¸å¯è¾¾å¯¹åƒå°±è®¤ä¸ºæ˜¯åƒåœ¾
2.æ¬è¿å¯¹è±¡å‹ç¼©å †
(æŒ‚èµ·æ‰§è¡Œæ‰˜ç®¡ä»£ç çº¿ç¨‹)
é‡Šæ”¾æœªæ ‡è®°çš„å¯¹è±¡æ¬è¿å¯è¾¾å¯¹è±¡ä¿®æ”¹å¼•ç”¨åœ°å€
å¤§å¯¹è±¡æ€»è¢«è®¤ä¸ºæ˜¯ç¬¬äºŒä»£å†…å­˜
ç›®çš„æ˜¯å‡å°‘æ€§èƒ½æŸè€—ï¼Œæé«˜æ€§èƒ½
ä¸ä¼šå¯¹å¤§å¯¹è±¡ï¼ˆ83kbä»¥ä¸Šï¼‰è¿›è¡Œæ¬è¿å‹ç¼©

```C#
//æ‰‹åŠ¨åƒåœ¾å›æ”¶
GC.Collect();
//ä¸èƒ½é¢‘ç¹è°ƒç”¨ï¼Œä¸€èˆ¬åœ¨loadingæ¡è¿‡æ¸¡åœºæ™¯æ—¶è°ƒç”¨
```



### æˆå‘˜å±æ€§

1.ç”¨äºä¿æŠ¤æˆå‘˜å˜é‡
2.ä¸ºæˆå‘˜å±æ€§çš„è·å–å’Œèµ‹å€¼æ·»åŠ é€»è¾‘å¤„ç†
3.è§£å†³3Pçš„å±€é™æ€§

å±æ€§å¯ä»¥è®©æˆå‘˜å˜é‡åœ¨å¤–éƒ¨
åªèƒ½è·å–ä¸èƒ½ä¿®æ”¹æˆ–è€…
åªèƒ½ä¿®æ”¹ä¸èƒ½è·å–

```C#
class Person
{
    private string name;
    public string Name
    {
        get //ä¸åŠ ä¼šä½¿ç”¨å±æ€§ç”³æ˜æ—¶çš„è®¿é—®æƒé™
        {
            //è¿”å›ä¹‹å‰çš„é€»è¾‘
            return name;
        }
        private set  //ä¸èƒ½è®©getå’Œsetçš„è®¿é—®æƒé™éƒ½ä½äºå±æ€§çš„æƒé™
        {
            //è®¾ç½®å‰çš„é€»è¾‘
            name = value; //valueè¡¨ç¤ºå¤–éƒ¨ä¼ å…¥çš„å€¼
        }
    }
    
    //è‡ªåŠ¨å±æ€§
    public float Height
    {
        get;
        private set;  //èƒ½å¾—ä¸èƒ½æ”¹
    }
}

```

1.é»˜è®¤ä¸åŠ ä¼šä½¿ç”¨å±æ€§ç”³æ˜æ—¶çš„è®¿é—®æƒé™
2.åŠ çš„è®¿é—®ä¿®é¥°ç¬¦è¦ä½äºå±æ€§çš„è®¿é—®æƒé™
3.ä¸èƒ½è®©getå’Œsetçš„è®¿é—®æƒé™éƒ½ä½äºå±æ€§çš„æƒé™

#regionçŸ¥è¯†ç‚¹å…­è‡ªåŠ¨å±æ€§
ä½œç”¨ï¼šå¤–éƒ¨èƒ½å¾—ä¸èƒ½æ”¹çš„ç‰¹å¾
å¦‚æœç±»ä¸­æœ‰ä¸€ä¸ªç‰¹å¾æ˜¯åªå¸Œæœ›å¤–éƒ¨èƒ½å¾—ä¸èƒ½æ”¹çš„åˆæ²¡ä»€ä¹ˆç‰¹æ®Šå¤„ç†
é‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªåŠ¨å±æ€§



### ç´¢å¼•å™¨

**åŸºæœ¬æ¦‚å¿µ**
è®©å¯¹è±¡å¯ä»¥åƒæ•°ç»„ä¸€æ ·é€šè¿‡ç´¢å¼•è®¿é—®å…¶ä¸­å…ƒç´ ï¼Œä½¿ç¨‹åºçœ‹èµ·æ¥æ›´ç›´è§‚ï¼Œæ›´å®¹æ˜“ç¼–å†™

**æ€»ç»“**
ç´¢å¼•å™¨å¯ä»¥è®©æˆ‘ä»¬ä»¥ä¸­æ‹¬å·çš„å½¢å¼èŒƒå›´è‡ªå®šä¹‰ç±»ä¸­çš„å…ƒç´ è§„åˆ™
æ¯”è¾ƒé€‚ç”¨äºåœ¨ç±»ä¸­æœ‰æ•°ç»„å˜é‡æ—¶ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„è®¿é—®å’Œè¿›è¡Œé€»è¾‘å¤„ç†

```C#
calss Person
{
    pricate string name;
    private Person[] friends;
    
    //å£°æ˜ç´¢å¼•å™¨
    //è¯­æ³•ï¼šè®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ this[å‚æ•°]{}
    public Person this[int index]
    {
        get
        {
            return friends[index];
        }
        set
        {
            friends[index] = value;
        }
    }
}
```



### é™æ€æˆå‘˜

static åœ¨ç¨‹åºå¼€å§‹è¿è¡Œæ—¶å°±ä¼šåˆ†é…å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ—¶å†…å­˜ç©ºé—´æ‰ä¼šé‡Šæ”¾

é™æ€æˆå‘˜ä¸ç¨‹åºåŒç”Ÿå…±æ­»

é™æ€å˜é‡/æ–¹æ³•ï¼šå¸¸ç”¨çš„å”¯ä¸€å˜é‡ï¼Œæ–¹ä¾¿åˆ«äººè·å–çš„å¯¹è±¡å£°æ˜

constå’Œstaticçš„åŒºåˆ«

1ã€constå¿…é¡»åˆå§‹åŒ–ï¼Œä¸èƒ½ä¿®æ”¹ï¼Œstaticæ²¡æœ‰è¿™ä¸ªè§„åˆ™

2ã€conståªèƒ½ä¿®é¥°å˜é‡



### é™æ€ç±»

**ç‰¹ç‚¹**
åªèƒ½åŒ…å«é™æ€æˆå‘˜
ä¸èƒ½è¢«å®ä¾‹åŒ–

**ä½œç”¨**
1.å°†å¸¸ç”¨çš„é™æ€æˆå‘˜å†™åœ¨é™æ€ç±»ä¸­æ–¹ä¾¿ä½¿ç”¨
2.é™æ€ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œæ›´èƒ½ä½“ç°å·¥å…·ç±»çš„å”¯ä¸€æ€§
æ¯”å¦‚Consoleå°±æ˜¯ä¸€ä¸ªé™æ€ç±»

```C#
static class test
{
    static test()  //ç¬¬ä¸€æ¬¡ä½¿ç”¨ç±»ä¸­å†…å®¹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨æ¥åˆå§‹åŒ–ï¼Œåªä¼šè°ƒç”¨ä¸€æ¬¡
    {
        ...
    }
}
```



### æ‹“å±•æ–¹æ³•

ä¸ºç°æœ‰çš„éé™æ€å˜é‡ç±»å‹æ·»åŠ æ–°æ–¹æ³•

PSï¼šå½“æ‹“å±•æ–¹æ³•åå’ŒåŸæœ‰çš„æŸä¸ªæ–¹æ³•é‡åï¼Œä¼šä½¿ç”¨åŸæœ‰çš„æ–¹æ³•æ–¹æ³•å¤±æ•ˆ

##### ä½œç”¨ï¼š

æå‡ç¨‹åºæ‹“å±•æ€§
ä¸éœ€è¦å†åœ¨å¯¹è±¡ä¸­é‡æ–°å†™æ–¹æ³•
ä¸éœ€è¦ç»§æ‰¿æ¥æ·»åŠ æ–¹æ³•
ä¸ºåˆ«äººå°è£…çš„ç±»å‹å†™é¢å¤–çš„æ–¹æ³•

å¯ä»¥ä¸ºè‡ªå®šä¹‰çš„éé™æ€ç±»æ·»åŠ æ‹“å±•æ–¹æ³•

```C#
//è¯­æ³•ï¼šè®¿é—®ä¿®é¥°ç¬¦ static è¿”å›å€¼ å‡½æ•°å(this æ‹“å±•ç±»å‹ å‚æ•°å,å‚æ•°ç±»å‹ å‚æ•°å,...){}
//ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨æ‹“å±•çš„ç›®æ ‡ï¼Œå‰é¢å¿…é¡»è¦åŠ this
public static void Speak(this int value)  //ä¸ºintæ‹“å±•äº†ä¸€ä¸ªæˆå‘˜æ–¹æ³•
{
    Console.WriteLine(value);  //valueè¡¨ç¤ºä½¿ç”¨è¯¥æ–¹æ³•çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œå› ä¸ºæˆå‘˜æ–¹æ³•éœ€è¦å®ä¾‹åŒ–å¯¹è±¡ä¹‹åæ‰èƒ½ä½¿ç”¨
}

int i = 10;
i.Speak();  //æ‰“å°å‡º10
```



### è¿ç®—ç¬¦é‡è½½ operator

ä½œç”¨ï¼šè®©è‡ªå®šä¹‰ç±»å’Œç»“æ„ä½“å¯¹è±¡å¯ä»¥è¿›è¡Œè¿ç®—

PSï¼šæ¡ä»¶è¿ç®—ç¬¦éœ€è¦æˆå¯¹å®ç°ï¼Œä¸€ä¸ªç¬¦å·å¯ä»¥æœ‰å¤šä¸ªé‡è½½ï¼Œä¸èƒ½ä½¿ç”¨refå’Œout

å¯é‡è½½è¿ç®—ç¬¦ï¼šç®—æ•°è¿ç®—ç¬¦ï¼ˆ+ - * / ++ --ï¼‰ï¼Œé€»è¾‘è¿ç®—ç¬¦ï¼ˆ!ï¼‰ï¼Œä½è¿ç®—ç¬¦ï¼Œæ¡ä»¶è¿ç®—ç¬¦(> < >= <= == != éœ€è¦æˆå¯¹å®ç°ï¼Œæ¯”å¦‚æœ‰å¤§äºå°±è¦æœ‰å°äº)



```C#
//è¯­æ³•ï¼špublic static è¿”å›ç±»å‹ operator è¿ç®—ç¬¦(å‚æ•°ä»¬)
class Point
{
    public int x;
    public int y;
    
    public static Point operator + (Point p1,Point p2) //æœ€å¤šä¸¤ä¸ªå‚æ•°
    {
        Point p = new Point();
        p.x = p1.x + p2.x;
        p.y = p1.y + p2.y;
 		return p;
    }
}

Point p1 = new Point();
p1.x = 1;
p1.y = 1;

Point p2 = new Point();
p2.x = 2;
p2.y = 2;

Point p3 = p1 + p2;
```



### å†…éƒ¨ç±»

æ²¡å•¥ç”¨

```C#
//å†…éƒ¨ç±»ï¼šåœ¨ä¸€ä¸ªç±»ä¸­å†å£°æ˜ä¸€ä¸ªç±»ï¼Œäº²å¯†å…³ç³»çš„ä½“ç°
class Person
{
    public Bodu bodu;
    public class Body
    {
        Arm leftArm;
        Arm rightArm;
        class Arm
        {
            
        }
    }
}

Person p = new Person();
//å®ä¾‹åŒ–å†…éƒ¨ç±»
Person.Body body = new Person.Body();
```



### åˆ†éƒ¨ç±» partial

æŠŠä¸€ä¸ªç±»åˆ†æˆå‡ éƒ¨åˆ†æ¥å£°æ˜

PSï¼šåˆ†éƒ¨ç±»å¯ä»¥å†™åœ¨å¤šä¸ªè„šæœ¬ä¸­ï¼Œè®¿é—®ä¿®é¥°ç¬¦è¦ä¸€è‡´ï¼Œåˆ†å¸ƒç±»ä¸­ä¸èƒ½æœ‰é‡å¤æˆå‘˜

```C#
partial class Student
{
    public string name;
}

partial class Student
{
    public int age;
}
```



## 2ã€ç»§æ‰¿

### ç»§æ‰¿çš„åŸºæœ¬è§„åˆ™

ä¸€ä¸ªç±»Aç»§æ‰¿ç±»Bï¼Œç±»Aå°†ä¼šæ‹¥æœ‰Bç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºï¼Œå¹¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ç‰¹å¾å’Œè¡Œä¸º

ç‰¹ç‚¹ï¼šå­ç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œå­ç±»å¯ä»¥é—´æ¥ç»§æ‰¿çˆ¶ç±»çš„çˆ¶ç±»

```C#
class Teacher { ... }

class ChineseTeacher : Teacher  //ç»§æ‰¿Teacherç±»
{
    //ç»§æ‰¿Teacherä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•å’Œæˆå‘˜å˜é‡
    //å¯ä»¥è‡ªå®šä¹‰å­ç±»è‡ªå·±çš„ç‰¹å¾å’Œè¡Œä¸º
}

//protected ä¿æŠ¤ å†…éƒ¨å’Œå­ç±»å¯ä»¥è®¿é—®
```



### é‡Œæ°æ›¿æ¢åŸåˆ™

ä»»ä½•çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»éƒ½å¯ä»¥æ›¿ä»£

çˆ¶ç±»å®¹å™¨è£…å­ç±»å¯¹è±¡

```C#
class GameObj{}
class Player : GameObj {}
class Monster : GameObj {}

//é‡Œæ°æ›¿æ¢ ç”¨çˆ¶ç±»å®¹å™¨è£…è½½å­ç±»å¯¹è±¡
GameObj player = new Player();

//iså’Œas
//isï¼šåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å¯¹è±¡ï¼Œè¿”å›bool
is(player is Player)
{
    ...
}

//asï¼šå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šç±»å¯¹è±¡ï¼ŒæˆåŠŸè¿”å›æŒ‡å®šç±»å‹å¯¹è±¡ï¼Œå¤±è´¥è¿”å›null
Player p = player as Player  //å°†playerè½¬ä¸ºPlayerç±»å‹
```



### ç»§æ‰¿ä¸­çš„æ„é€ å‡½æ•°

æ‰§è¡Œé¡ºåºï¼šå£°æ˜å­ç±»å¯¹è±¡æ—¶ï¼Œå…ˆæ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†æ‰§è¡Œå­ç±»æ„é€ å‡½æ•°

å­ç±»å®ä¾‹åŒ–æ—¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°ï¼Œå¦‚æœçˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°è¢«é¡¶æ›¿ï¼Œä¼šæŠ¥é”™

çˆ¶ç±»å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°

thisè°ƒç”¨è‡ªå·±çš„æ„é€ å‡½æ•°ï¼Œbaseè°ƒç”¨çˆ¶ç±»çš„

```C#
//é€šè¿‡baseè°ƒç”¨æŒ‡å®šçš„çˆ¶ç±»æ„é€ å‡½æ•°
public Son : Father
{
    public Son(int i) : base(...)
    {
        ...
    }
}
```



### ä¸‡ç‰©ä¹‹çˆ¶å’Œè£…ç®±æ‹†ç®±

ä¸‡ç‰©ä¹‹çˆ¶objectæ˜¯æ‰€æœ‰ç±»å‹çš„åŸºç±»ï¼Œæ˜¯å¼•ç”¨ç±»å‹

```C#
//objectè½¬æ¢
//å¼•ç”¨ç±»å‹
object obj = new Son();
o as Son
//å€¼ç±»å‹
object obj2 = 1;
//å¼ºè½¬
float f = (float)obj2
```



### è£…ç®±æ‹†ç®±

åŸºäºé‡Œæ°æ›¿æ¢åŸåˆ™ å¯ä»¥ç”¨objectå®¹å™¨è£…è½½ä¸€åˆ‡ç±»å‹çš„å˜é‡

##### å‘ç”Ÿæ¡ä»¶

ç”¨objectå­˜å€¼ç±»å‹ï¼ˆè£…ç®±ï¼‰
å†æŠŠobjectè½¬ä¸ºå€¼ç±»å‹ï¼ˆæ‹†ç®±ï¼‰

##### è£…ç®±

æŠŠå€¼ç±»å‹ç”¨å¼•ç”¨ç±»å‹å­˜å‚¨
æ ˆå†…å­˜ä¼šè¿ç§»åˆ°å †å†…å­˜ä¸­

##### æ‹†ç®±

æŠŠå¼•ç”¨ç±»å‹å­˜å‚¨çš„å€¼ç±»å‹å–å‡ºæ¥
å †å†…å­˜ä¼šè¿ç§»åˆ°æ ˆå†…å­˜ä¸­
å¥½å¤„ï¼šä¸ç¡®å®šç±»å‹æ—¶å¯ä»¥æ–¹ä¾¿å‚æ•°çš„å­˜å‚¨å’Œä¼ é€’
åå¤„ï¼šå­˜åœ¨å†…å­˜è¿ç§»ï¼Œå¢åŠ æ€§èƒ½æ¶ˆè€—

```C#
//è£…ç®±
object obj = 3;
//æ‹†ç®±
int i = (int)obj
```



### å¯†å°ç±» sealed

ä½œç”¨ï¼šè®©ç±»æ— æ³•å†è¢«ç»§æ‰¿

```C#
sealed class Father  //Fatherç±»ä¸èƒ½å†è¢«ç»§æ‰¿ï¼Œæ–­å­ç»å­™
{
    ...
}
```



## 3ã€å¤šæ€

### å¤šæ€åŸºæœ¬æ¦‚å¿µ

å¤šæ€æŒ‰å­—é¢çš„æ„æ€å°±æ˜¯â€œå¤šç§çŠ¶æ€â€ï¼Œè®©ç»§æ‰¿åŒä¸€çˆ¶ç±»çš„å­ç±»ä»¬ï¼Œåœ¨æ‰§è¡Œç›¸åŒæ–¹æ³•æ—¶æœ‰ä¸åŒçš„è¡¨ç°ï¼ŒçŠ¶æ€
ä¸»è¦ç›®çš„
åŒä¸€çˆ¶ç±»çš„å¯¹è±¡
æ‰§è¡Œç›¸åŒè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰æœ‰ä¸åŒçš„è¡¨ç°
è§£å†³çš„é—®é¢˜ï¼šè®©åŒä¸€ä¸ªå¯¹è±¡æœ‰å”¯ä¸€è¡Œä¸ºçš„ç‰¹å¾

```C#
//è™šå‡½æ•°ï¼šå¯ä»¥è¢«å­ç±»é‡å†™
class GameObject
{
    public virtual void Attack()
    {
        ...
    }
}

//overvideé‡å†™è™šå‡½æ•°
class Player : GameObject
{
    public override void Attack()
    {
        base.Attack(); //é€šè¿‡baseä¿ç•™çˆ¶ç±»çš„è¡Œä¸º
    }
}
```



### æŠ½è±¡ç±»å’ŒæŠ½è±¡å‡½æ•° abstract

ç‰¹ç‚¹ï¼š
1.ä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»
2.å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•
3.ç»§æ‰¿æŠ½è±¡ç±»å¿…é¡»é‡å†™å…¶æŠ½è±¡æ–¹æ³•

ä¸€ç±»å¯¹è±¡çš„ç»Ÿç§°ï¼Œç°å®ä¸å­˜åœ¨çš„ä¸œè¥¿

```C#
abstract class Thing
{
    
}
```



##### æŠ½è±¡æ–¹æ³•

æŠ½è±¡å‡½æ•°ï¼Œåˆå«çº¯è™šæ–¹æ³•

##### ç‰¹ç‚¹ï¼š

1.åªèƒ½åœ¨æŠ½è±¡ç±»ä¸­ç”³æ˜
2.æ²¡æœ‰æ–¹æ³•ä½“
3.ä¸èƒ½æ˜¯ç§æœ‰çš„
4.ç»§æ‰¿åå¿…é¡»å®ç°ç”¨overrideé‡å†™

```C#
abstract class Thing
{
    public abstract void Water(); //æ²¡æœ‰æ–¹æ³•ä½“
}
```

##### æ€»ç»“

æŠ½è±¡ç±»è¢«abstractä¿®é¥°çš„ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•
æŠ½è±¡æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“çš„çº¯è™šæ–¹æ³•ç»§æ‰¿åå¿…é¡»å»å®ç°çš„æ–¹æ³•

##### æ³¨æ„ï¼š

ä¸å¸Œæœ›è¢«å®ä¾‹åŒ–çš„å¯¹åƒï¼Œç›¸å¯¹æ¯”è¾ƒæŠ½è±¡çš„ç±»å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»
çˆ¶ç±»ä¸­çš„è¡Œä¸ºä¸å¤ªéœ€è¦è¢«å®ç°çš„ï¼Œåªå¸Œæœ›å­ç±»å»å®šä¹‰å…·ä½“çš„è§„åˆ™çš„å¯ä»¥é€‰æ‹©æŠ½è±¡ç±»ç„¶åä½¿ç”¨å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•æ¥å®šä¹‰è§„åˆ™



### æ¥å£ interface

æ¥å£æ˜¯æŠ½è±¡è¡Œä¸ºçš„åŸºç±»

ä½œç”¨ï¼šåŸºç±»æ— æ³•å®ç°çš„æ–¹æ³•ç”¨æ¥å£æ¥å®ç°


##### æ¥å£å£°æ˜çš„è§„èŒƒ

1.ä¸åŒ…å«æˆå‘˜å˜é‡
2åªåŒ…å«æ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å™¨ã€äº‹ä»¶
3.æˆå‘˜ä¸èƒ½è¢«å®ç°
4.æˆå‘˜å¯ä»¥ä¸ç”¨å†™è®¿é—®ä¿®é¥°ç¬¦ï¼Œä¸èƒ½æ˜¯ç§æœ‰çš„
5.æ¥å£ä¸èƒ½ç»§æ‰¿ç±»ï¼Œä½†æ˜¯å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªæ¥å£

##### æ¥å£çš„ä½¿ç”¨è§„èŒƒ

1.ç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£
2.ç±»ç»§æ‰¿æ¥å£åï¼Œå¿…é¡»å®ç°æ¥å£ä¸­æ‰€æœ‰æˆå‘˜
ç‰¹ç‚¹ï¼š
1.å®ƒå’Œç±»çš„ç”³æ˜ç±»ä¼¼
2.æ¥å£æ˜¯ç”¨æ¥ç»§æ‰¿çš„
3.æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥ä½œä¸ºå®¹å™¨å­˜å‚¨å¯¹è±¡

```C#
interface I_Fly()
{
    
}

//æ¥å£ç»§æ‰¿æ¥å£ ä¸éœ€è¦å®ç°
//ç­‰ç±»ç»§æ‰¿æ¥å£åï¼Œç±»ä¸­å®ç°æ‰€æœ‰å†…å®¹
interface I_Walk(){}
interface I_Move : I_Fly,I_Wakj {}

//æ˜¾å¼å®ç°æ¥å£
//å½“ä¸€ä¸ªç±»ç»§æ‰¿ä¸¤ä¸ªæ¥å£
//ä½†æ˜¯æ¥å£ä¸­å­˜åœ¨ç€åŒåæ–¹æ³•æ—¶
//æ³¨æ„ï¼šæ˜¾ç¤ºå®ç°æ¥å£æ—¶ä¸èƒ½å†™è®¿é—®ä¿®é¥°ç¬¦
class Player : I_Attack,I_SuperAttack
{
    void I_Attack.Attack(){}
    void I_SuperAttack.Attack(){}
}
```



##### æ€»ç»“ï¼š

ç»§æ‰¿ç±»ï¼šæ˜¯å¯¹è±¡é—´çš„ç»§æ‰¿ï¼ŒåŒ…æ‹¬ç‰¹å¾è¡Œä¸ºç­‰ç­‰
ç»§æ‰¿æ¥å£ï¼šæ˜¯è¡Œä¸ºé—´çš„ç»§æ‰¿ï¼Œç»§æ‰¿æ¥å£çš„è¡Œä¸ºè§„èŒƒï¼ŒæŒ‰ç…§è§„èŒƒå»å®ç°å†…å®¹
ç”±äºæ¥å£ä¹Ÿæ˜¯éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥å£å®¹å™¨è£…å¯¹è±¡
é‚£ä¹ˆä¹…å¯ä»¥å®ç°è£…è½½å„ç§æ¯«æ— å…³ç³»ä½†æ˜¯å´æœ‰ç›¸åŒè¡Œä¸ºçš„å¯¹åƒ

##### æ³¨æ„ï¼š

1.æ¥å£å€¼åŒ…å«æˆå‘˜æ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å™¨ã€äº‹ä»¶ï¼Œå¹¶ä¸”éƒ½ä¸å®ç°ï¼Œéƒ½æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦
2.å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»
3.æ¥å£å¯ä»¥ç»§æ‰¿æ¥å£ï¼Œç›¸å½“äºåœ¨è¿›è¡Œè¡Œä¸ºåˆå¹¶ï¼Œå¾…å­ç±»ç»§æ‰¿æ—¶å†å»å®ç°å…·ä½“çš„è¡Œä¸º
4.æ¥å£å¯ä»¥è¢«æ˜¾ç¤ºå®ç°ä¸»è¦ç”¨äºå®ç°ä¸åŒæ¥å£ä¸­çš„åŒåå‡½æ•°çš„ä¸åŒè¡¨ç°
5.å®ç°çš„æ¥å£æ–¹æ³•å¯ä»¥åŠ virtua1å…³é”®å­—ä¹‹åå­ç±»å†é‡å†™



### å¯†å°æ–¹æ³•

åŸºæœ¬æ¦‚å¿µï¼šç”¨å¯†å°å…³é”®å­—sealedä¿®é¥°çš„é‡å†™å‡½æ•°
ä½œç”¨ï¼šè®©è™šæ–¹æ³•æˆ–è€…æŠ½è±¡æ–¹æ³•ä¹‹åä¸èƒ½å†è¢«é‡å†™
ç‰¹ç‚¹ï¼šå’Œoverride-ä¸€èµ·å‡ºç°



### å‘½åç©ºé—´

æ¦‚å¿µï¼šå‘½åç©ºé—´æ˜¯ç”¨æ¥ç»„ç»‡å’Œé‡ç”¨ä»£ç çš„
ä½œç”¨ï¼šå°±åƒæ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œç±»å°±åƒæ˜¯ä¸€ä»¶ä¸€ä»¶çš„å·¥å…·ï¼Œéƒ½æ˜¯ç”³æ˜åœ¨å‘½åç©ºé—´ä¸­çš„

ä¸åŒå‘½åç©ºé—´ä¸­ç›¸äº’ä½¿ç”¨ï¼Œéœ€è¦å¼•ç”¨å‘½åç©ºé—´ï¼Œæˆ–è€…æŒ‡æ˜å‡ºå¤„

ä¸åŒå‘½åç©ºé—´å¯ä»¥æœ‰é‡åç±»ï¼Œå¦‚æœè¦ä½¿ç”¨ä¸åŒå‘½åç©ºé—´çš„é‡åç±»ï¼Œåˆ™å¿…é¡»æŒ‡æ˜å‡ºå¤„

å‘½åç©ºé—´å¯ä»¥åŒ…è£¹å‘½åç©ºé—´

å‘½åç©ºé—´çš„ç±»é»˜è®¤æœªinternal å†…éƒ¨çš„ åªèƒ½åœ¨å½“å‰ç¨‹åºé›†ä½¿ç”¨

æ—¥#regionçŸ¥è¯†ç‚¹å…­å…³äºä¿®é¥°ç±»çš„è®¿é—®ä¿®é¥°ç¬¦
æ—¥/pub1ic
ä¸€å‘½åç©ºé—´ä¸­çš„ç±»é»˜è®¤ä¸ºoublic
/internalä¸€åªèƒ½åœ¨è¯¥ç¨‹åºé›†ä¸­ä½¿ç”¨
//abstractä¸€
æŠ½è±¡ç±»
//sealed
å¯†å°ç±»
//partial
ä¸€åˆ†éƒ¨ç±»

```C#
//ä¸åŒå‘½åç©ºé—´ä¸­ç›¸äº’ä½¿ç”¨ï¼Œéœ€è¦å¼•ç”¨å‘½åç©ºé—´
using test1;

namespace test1
{
    class Player{}
}

namespace test2
{
    test1.Player p = new test1.Player(); //æˆ–è€…æŒ‡æ˜å‡ºå¤„
}

```



### ä¸‡ç‰©ä¹‹çˆ¶çš„æ–¹æ³•

é™æ€æ–¹æ³•Equalsåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
æœ€ç»ˆçš„åˆ¤æ–­æƒï¼Œäº¤ç»™å·¦ä¾§å¯¹åƒçš„Equalsæ–¹æ³•ï¼ˆå°±æ˜¯è™šæ–¹æ³•çš„equalsæ–¹æ³•
ä¸ç®¡å€¼ç±»å‹å¼•ç”¨ç±»å‹éƒ½ä¼šæŒ‰ç…§å·¦ä¾§å¯¹è±¡Equalsæ–¹æ³•çš„è§„åˆ™æ¥è¿›è¡Œæ¯”è¾ƒ
é™æ€æ–¹æ³•ReferenceEquals
æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç›¸åŒçš„å¼•ç”¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ¯”è¾ƒå¼•ç”¨ç±»å‹çš„å¯¹åƒè±¡ã€‚
å€¼ç±»å‹å¯¹åƒè±¡è¿”å›å€¼å§‹ç»ˆæ˜¯fa1seã€‚

```C#
//å€¼ç±»å‹
object.Equals(1,1);  //true
//å¼•ç”¨ç±»å‹ åˆ¤æ–­æ˜¯å¦æŒ‡å‘ä¸€ä¸ªæˆ¿é—´
Test t1 = new Test();
Test t2 = new Test();
object.Equals(t1,t2);  //false
t2 = t1;
object.Equals(t1,t2);  //true
```

é™æ€æ–¹æ³•ReferenceEquals
æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç›¸åŒçš„å¼•ç”¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ¯”è¾ƒå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚
å€¼ç±»å‹å¯¹è±¡è¿”å›å€¼å§‹ç»ˆæ˜¯fa1seã€‚

```C#
Object.ReferenceEquals();//æ•ˆæœå’Œä¸Šé¢å·®ä¸å¤š
//å¯ä»¥çœç•¥Objectï¼Œå› ä¸ºobjæ˜¯æ‰€æœ‰ç±»å‹çš„åŸºç±»
Equalsç”¨æ¥æ¯”å€¼ï¼ŒReferenceEqualsç”¨æ¥æ¯”å¼•ç”¨
```



çŸ¥è¯†ç‚¹äºŒobjectä¸­çš„æˆå‘˜æ–¹æ³•
/æ™®é€šæ–¹æ³•GetType
/è¯¥æ–¹æ³•åœ¨åå°„ç›¸å…³çŸ¥è¯†ç‚¹ä¸­æ˜¯éå¸¸é‡è¦çš„æ–¹æ³•ï¼Œä¹‹åæˆ‘ä»¬ä¼šå…·ä½“çš„è®²è§£è¿™é‡Œè¿”å›çš„Tyeç±»å‹
/è¯¥æ–¹æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯è·å–å¯¹è±¡è¿è¡Œæ—¶çš„ç±»å‹Type,
/é€šè¿‡Typeç»“åˆåå°„ç›¸å…³çŸ¥è¯†ç‚¹å¯ä»¥åšå¾ˆå¤šå…³äºå¯¹è±¡çš„æ“ä½œã€‚
Test t new Test();
Type type t.GetType();
//æ™®é€šæ–¹æ³•Memberwiseclone
//è¯¥æ–¹æ³•ç”¨äºè·å–å¯¹è±¡çš„æµ…æ‹·è´å¯¹è±¡ï¼Œå£è¯­åŒ–çš„æ„æ€å°±æ˜¯ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œ1
//ä½†æ˜¯æ–°å¯¹è±¡ä¸­çš„å¼•ç”¨å˜é‡ä¼šå’Œè€å¯¹è±¡ä¸­ä¸€è‡´ã€‚ 



#### #regionçŸ¥è¯†ç‚¹ä¸‰objectä¸­çš„è™šæ–¹æ³•

//è™šæ–¹æ³•Equa1s
/é»˜è®¤å®ç°è¿˜æ˜¯æ¯”è¾ƒä¸¤è€…æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¼•lç”¨ï¼Œå³ç›¸å½“äºReferenceEqualsã€‚
C#
/ä½†æ˜¯å¾®è½¯åœ¨æ‰€æœ‰å€¼ç±»å‹çš„åŸºç±»System..Va1 ueTypetä¸­é‡å†™äº†è¯¥æ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒå€¼ç›¸ç­‰ã€‚
/æˆ‘ä»¬ä¹Ÿå¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œå®šä¹‰è‡ªå·±çš„æ¯”è¾ƒç›¸ç­‰çš„è§„ä¾§
æ–‡ä»¶(E
//è™šæ–¹æ³•GetHashCode
//è¯¥æ–¹æ³•æ˜¯è·å–å¯¹è±¡çš„å“ˆå¸Œç 
//(ä¸€ç§é€šè¿‡ç®—æ³•ç®—å‡ºçš„ï¼Œè¡¨ç¤ºå¯¹è±¡çš„å”¯ä¸€ç¼–ç ï¼Œä¸åŒå¯¹åƒå“ˆå¸Œç æœ‰å¯èƒ½ä¸€æ ·ï¼Œå…·ä½“å€¼æ ¹æ®å“ˆå¸Œç®—æ³•å†³å®š)
/æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™è¯¥å‡½æ•°æ¥è‡ªå·±å®šä¹‰å¯¹åƒçš„å“ˆå¸Œç ç®—
æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æå°‘ï¼ŒåŸºæœ¬ä¸ç”¨ã€‚
//è™šæ–¹æ³•Tostring
//è¯¥æ–¹æ³•ç”¨äºè¿”å›å½“å‰å¯¹åƒä»£è¡¨çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™å®ƒå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„å¯¹åƒè½¬å­—ç¬¦ä¸²è§„åˆ™
/è¯¥æ–¹æ³•éå¸¸å¸¸ç”¨ã€‚å½“æˆ‘ä»¬è°ƒç”¨æ‰“å°æ–¹æ³•æ—¶ï¼Œé»˜è®¤ä½¿ç”¨çš„å°±æ˜¯å¯¹è±¡çš„Tostringæ–¹æ³•åæ‰“å°å‡ºæ¥çš„å†…å®¹ã€‚



### String

å­—ç¬¦ä¸²æœ¬è´¨æ˜¯charæ•°ç»„

```C#
//å­—ç¬¦ä¸²æŒ‡å®šä½ç½®è·å–
string str = "hahaha";
Console.WriteLine(str[0]);  //æ‰“å° h
//è½¬ä¸ºcharæ•°ç»„
char[] charArr = str.ToCharArray();
//å­—ç¬¦ä¸²æ‹¼æ¥
str = string.Format("{0}{1}",1,2); //æ‰“å° 12
//æ­£å‘æŸ¥æ‰¾å­—ç¬¦ä½ç½®
str = "ä¸€å¤œæš´å¯Œ";
str.IndexOf("å¤œ"); //è¿”å›ä¸‹æ ‡ 1ï¼Œæ²¡æ‰¾åˆ°è¿”å›-1
//åå‘æŸ¥æ‰¾ï¼Œä½†æ˜¯æ‰“å°çš„ä¸‹æ ‡æ˜¯ä»å‰å¾€åæ•°
str = "ä¸€å¤œæš´å¯Œæš´å¯Œ";
str.LastIndexOf("æš´å¯Œ"); //æ‰“å° 4
//ç§»é™¤æŒ‡å®šä½ç½®åçš„å­—ç¬¦
str = "ä¸€å¤œæš´å¯Œ";
str = str.Remove(2);  //è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œæƒ³è¦æ”¹å˜åŸæ¥çš„å­—ç¬¦ï¼Œéœ€è¦è¿›è¡Œèµ‹å€¼
Console.WriteLine("ä¸€å¤œå¯Œ");
//ä¸¤ä¸ªå‚æ•°æ—¶
str = str.Remove(1,1);  //ä»ä¸‹æ ‡1å¼€å§‹ï¼Œåˆ é™¤ä¸€ä¸ªå­—ç¬¦

//æ›¿æ¢å­—ç¬¦ä¸²
str = "ä¸€å¤œæš´å¯Œ";
str = str.Replace("å¯Œ","ç©·");
Console.WriteLine(str); //æ‰“å° "ä¸€å¤œç©·"

//å¤§å°å†™è½¬æ¢
str = "abc";
str = str.ToUpper(); //è½¬å¤§å†™
str = str.ToLower(); //è½¬å°å†™

//å­—ç¬¦ä¸²æˆªå–
//æˆªå–ä»æŒ‡å®šä½ç½®å¼€å§‹ä¹‹åçš„å­—ç¬¦ä¸²
str = "ä¸€å¤œæš´å¯Œ";
str = str.Substring(1); //æ‰“å° æš´å¯Œ
str = str.Substring(2,1); //æ‰“å°å¯Œ ä¸ä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è¶Šç•Œ

//å­—ç¬¦ä¸²åˆ‡å‰²
str = "1,2,3"
string[] strArr = str.split(","); //è¿”å›æ•°ç»„
//å¾ªç¯æ‰“å°æ˜¾ç¤º 123
```



### StringBuilder

å¯ä»¥ä¼˜åŒ–å†…å­˜

#regionçŸ¥è¯†å›é¡¾
/stringæ˜¯ç‰¹æ®Šçš„å¼•ç”¨
/æ¯æ¬¡é‡æ–°èµ‹å€¼æˆ–è€…æ‹¼æ¥æ—¶ä¼šåˆ†é…æ–°çš„å†…å­˜ç©ºé—´
/å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²ç»å¸¸æ”¹å˜ä¼šéå¸¸æµªè´¹ç©ºé—´#regionçŸ¥è¯†ç‚¹StringBuilder
/C#æä¾›çš„ä¸€ä¸ªç”¨äºå¤„ç†å­—ç¬¦ä¸²çš„å…¬å…±ç±»
//ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼š
//ä¿®æ”¹å­—ç¬¦ä¸²è€Œä¸åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œéœ€è¦é¢‘ç¹ä¿®æ”¹å’Œæ‹¼æ¥çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å®ƒï¼Œå¯ä»¥æå‡æ€§èƒ½
/ä½¿ç”¨å‰éœ€è¦å¼•ç”¨å‘½åç©ºé—´

æœ‰ç‚¹åƒåŠ¨æ€æ•°ç»„ï¼Ÿ

```C#
using System.Text;
StringBuilder str = new StringBuilder("å•Šå“ˆå“ˆ");  //åˆå§‹å®¹é‡å­˜åœ¨å†—ä½™ï¼Œä¼šç•™æœ‰ä¸€æ®µç©ºçš„ç©ºé—´ï¼Œç”¨ç©ºé—´æ¢å–æ€§èƒ½
//StringBui1derå­˜åœ¨ä¸€ä¸ªå®¹é‡çš„é—®é¢˜ï¼Œæ¯æ¬¡å¾€é‡Œé¢å¢åŠ æ—¶ä¼šè‡ªåŠ¨æ‰©å®¹
//å¡«å…¥çš„å†…å®¹è¶…å‡ºå®¹é‡æ—¶ï¼Œä¼šå¼€è¾Ÿä¸€ä¸ªæ–°æˆ¿é—´ï¼Œä½†äº§ç”Ÿçš„åƒåœ¾æ¯”stringå°ï¼Œä¸”æ–°æˆ¿é—´å®¹é‡ä¼šæ‰©å®¹ä¸¤å€

//è·å¾—å®¹é‡
str.Capacity;
//è·å–é•¿åº¦
str.Length;

//å¢åŠ 
str.Append("å“ˆå“ˆå“ˆ");
str.AppendFormat("å˜å˜å˜");
//æ’å…¥
str.Insert(æ’å…¥ä¸‹æ ‡;æ’å…¥å­—ç¬¦ä¸²);
//åˆ é™¤
str.Remove(å¼€å§‹ä¸‹æ ‡,åˆ é™¤ä¸ªæ•°);
//æ¸…ç©º
str.Clear();
//æŸ¥è¯¢
str[0];
//ä¿®æ”¹
str[0] = "å“¦å“¦å“¦"
//æ›¿æ¢
str.Replace("å“¦å“¦å“¦","å•Šå•Šå•Š");
	//ä¸éœ€è¦èµ‹å€¼ï¼Œä¼šç›´æ¥ä¿®æ”¹åŸå†…å®¹ï¼Œå› ä¸ºæ²¡æœ‰æ‰©å®¹ï¼Œä¸ä¼šäº§ç”Ÿæ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šäº§ç”Ÿåƒåœ¾
```



### ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«

ã€‚ã€‚ã€‚















# C#è¿›é˜¶

## ç®€å•æ•°æ®ç»“æ„ç±»

### ArrayList    åŠ¨æ€æ•°ç»„

æœ¬è´¨æ˜¯objectç±»å‹æ•°ç»„

```C#
//å¼•å…¥å‘½åç©ºé—´
    using System.Collections;

//åˆ›å»ºä¸€ä¸ªarraylist
    ArrayList arr = new ArrayList();

//å¢
    arr.Add(6);  //å•ä¸ªå¢åŠ 
    arr.AddRange(arr2)  //èŒƒå›´å¢åŠ 
   	arr.Indert(æ’å…¥ä½ç½®,666) //ä¸­é—´æ’å…¥666
//åˆ 
    //åˆ é™¤æŒ‡å®šå…ƒç´ 
    arr.remove(1);  //ä»å¤´åˆ°å°¾éå†ï¼Œæ‰¾åˆ°1åˆ é™¤
    //åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ 
    arr.RemoveAt(2)
//æŸ¥
        //æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨
        arr.Contains("666")  //è¿”å›boolå€¼
        //æŸ¥æ‰¾å…ƒç´ æ‰€åœ¨çš„ä½ç½®
        int i = arr.IndexOf(66)  //ä»å¤´æ‰¾
        int ii = arr.LastIndexOf(66)  //ä»å°¾å¼€å§‹æ‰¾
        
//æŸ¥çœ‹arraylistçš„é•¿åº¦å’Œå¤§å°
    arr.Count;  //é•¿åº¦
    arr.Capacity();  //å®¹é‡

```





### è£…ç®±æ‹†ç®±

ä½¿ç”¨å¯¹è±¡æ¥å­˜å‚¨æ•°æ®ï¼Œå°±å­˜åœ¨è£…ç®±æ‹†ç®±

è£…ç®±  å°†æ ˆä¸Šçš„å†…å­˜è½¬ç§»åˆ°å †ä¸Šï¼Œå¾€å…¶ä¸­è¿›è¡Œå€¼ç±»å‹å­˜å‚¨æ—¶å°±æ˜¯åœ¨è£…ç®±


æ‹†ç®±  å½“å°†å€¼ç±»å‹å¯¹è±¡å–å‡ºæ¥è½¬æ¢ä½¿ç”¨æ—¶


### stackæ ˆ

Stack(æ ˆ)æ˜¯ä¸€ä¸ªc#ä¸ºæˆ‘ä»¬å°è£…å¥½çš„ç±»
å®ƒçš„æœ¬è´¨ä¹Ÿæ˜¯object[]æ•°ç»„ï¼Œåªæ˜¯å°è£…äº†ç‰¹æ®Šçš„å­˜å‚¨è§„åˆ™
Stackæ˜¯æ ˆå­˜å‚¨å®¹å™¨ï¼Œæ ˆæ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„
å…ˆå­˜å…¥çš„æ•°æ®åè·å–ï¼Œåå­˜å…¥çš„æ•°æ®å…ˆè·å–
æ ˆæ˜¯å…ˆè¿›åå‡º

```C#
//å¼•å…¥å‘½åç©ºé—´
using System.Collections
//åˆ›å»º
Stack stack = new Stack();
//å‹æ ˆ å¢ åªèƒ½ä¸€ä¸ªä¸ªæ”¾
stack.Push()
//å– å¼¹æ ˆ ä¸å­˜åœ¨åˆ é™¤æ¦‚å¿µ
stack.Pop()
//æŸ¥ 
stack.Peek()  //åªèƒ½æŸ¥çœ‹æ ˆé¡¶çš„å†…å®¹
stack.Contains(xxx)   //æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨æ ˆä¸­
    
//foreachéå† é¡ºåºæ˜¯ä»æ ˆé¡¶åˆ°æ ˆåº•
foreach(object item in stack){ ... }
object[] arr = stack.ToArray()  //è½¬æ•°ç»„åå† éå†
    
//å¾ªç¯å¼¹æ ˆ
while(stack.Count > 0)
{
    stack.Pop()
}
```



### queue é˜Ÿåˆ—

æ ˆç±»ä¼¼äºå¼¹å¤¹ï¼Œåå¡å…¥çš„å­å¼¹å…ˆæ‰“å‡ºï¼Œé˜Ÿåˆ—ç±»ä¼¼äºä¸€ä¸ªåŒå‘ç®¡é“ï¼Œæœ‰è¿›å‡ºå£
Queueæ˜¯ä¸€ä¸ªC#ä¸ºæˆ‘ä»¬å°è£…å¥½çš„ç±»
å®ƒçš„æœ¬è´¨ä¹Ÿæ˜¯object[]æ•°ç»„ï¼Œåªæ˜¯å°è£…äº†ç‰¹æ®Šçš„å­˜å‚¨è§„åˆ™
Queueæ˜¯é˜Ÿåˆ—å­˜å‚¨å®¹å™¨
é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„
å…ˆå­˜å…¥çš„æ•°æ®å…ˆè·å–ï¼Œåå­˜å…¥çš„æ•°æ®åè·å–
å…ˆè¿›å…ˆå‡º

```C#
//å¼•å…¥å‘½åç©ºé—´
using System.Collections
//åˆ›å»ºå®ä¾‹
Queue queue = new Queue();
//å¢
queue.Enqueue();
//å–  å…ˆå–å…ˆåŠ å…¥çš„å¯¹è±¡
queue.Dequeue();
//æŸ¥ æŸ¥çœ‹é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ä½†ä¸ä¼šç§»é™¤
queue.Peek()  //æ–¹æ³•å’Œæ ˆä¸€æ ·
queue.Contains(xxx)  //æŸ¥çœ‹æ˜¯å¦å­˜åœ¨å…ƒç´ xxx
    
//æ”¹
queue.Clear()  //ä¸èƒ½æ”¹åªèƒ½æ¸…ç©ºé˜Ÿåˆ—
//éå†å’Œæ ˆä¸€æ ·
//å¾ªç¯å‡ºåˆ—ï¼Œå’Œæ ˆä¸€æ ·
```



### HashTable å“ˆå¸Œè¡¨ æ•£åˆ—è¡¨

Hashtable(åˆç§°æ•£åˆ—è¡¨)æ˜¯åŸºäºé”®çš„å“ˆå¸Œä»£ç ç»„ç»‡èµ·æ¥çš„é”®å€¼å¯¹
å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡
ä½¿ç”¨é”®æ¥è®¿é—®é›†åˆä¸­çš„å…ƒç´ 

```C#
//å£°æ˜
Hashtable hashtable = new Hashtable()
    
//å¢
    hashtable.Add(key,value)  //ä¸èƒ½å‡ºç°ç›¸åŒçš„é”®ï¼Œå€¼æ— æ‰€è°“
    
//åˆ  åªèƒ½é€šè¿‡é”®å–åˆ é™¤
    hashtable.Remove(key)
    
    hashtable.Clear()  //æ¸…ç©º
    
//æŸ¥
    hashtable[key]  //æ‰¾ä¸åˆ°è¿”å›null
    //é€šè¿‡é”®æŸ¥æ‰¾
	hashtable.Contains(key)
    hashtable.ContainsKey(key)
    //é€šè¿‡å€¼æŸ¥æ‰¾
    hashtable.ConatinsValue(value)
    
//æ”¹ åªèƒ½æ”¹å€¼ï¼Œä¸èƒ½æ”¹é”®
    hashtable[key] = xxx
    
//éå†
    //éå†æ‰€æœ‰é”®hashtable.Keys  éå†æ‰€æœ‰å€¼hashtable.Values
    foreach(object item in hashtable.Keys)
    {
        //item  é”®  hashtable[item]  å€¼
    }

//é”®å€¼å¯¹ä¸€èµ·éå†
	foreach(DictionaryEntey item in hashtable)
    {
		item.Key
        item.Value
    }

//è¿­ä»£å™¨éå†æ³•
	IDictionaryEnumerator enumerator = hashtable.GetEnumerator()
    bool falg = enumerator.MoveNext()
    while(falg)
    {
        enumerator.Key  //é”®
        enumerator.Value  //å€¼
        flag = enumrator.MoveNext()  //æ¸¸æ ‡ä¸‹ç§»
    }
```



## æ³›å‹

### æ³›å‹

æ³›å‹ç›¸å½“äºç±»å‹å ä½ç¬¦ï¼Œå®ç°äº†ç±»å‹å‚æ•°åŒ–ï¼Œè¾¾åˆ°ä»£ç é‡ç”¨ç›®çš„
é€šè¿‡ç±»å‹å‚æ•°åŒ–æ¥å®ç°åŒä¸€ä»½ä»£ç ä¸Šæ“ä½œå¤šç§ç±»å‹
å®šä¹‰ç±»æˆ–æ–¹æ³•æ—¶ä½¿ç”¨æ›¿ä»£ç¬¦ä»£è¡¨å˜é‡ç±»å‹ï¼Œå½“çœŸæ­£ä½¿ç”¨ç±»æˆ–è€…æ–¹æ³•æ—¶å†å…·ä½“æŒ‡å®šç±»å‹

```C#
//æ³›å‹ç±»
    class TestClass<T> 
    {
        public T value;
    }

//ä½¿ç”¨
    TestClass<int> t = new TestClass<int>()  //å…·ä½“æŒ‡å®šç±»å‹
    t.value = 10
    TestClass<string>TestClass<string>()
    t.value = 'å¦™é˜¿'

//å¤šä¸ªå‚æ•°
    class TestClass2<T1,T2,T3>  //æ³›å‹ç±»
    {
        public T1 value1;
        public T2 value2;
        public T3 value3;
    }

    TestClass2<int,float,TestClass<string>> t2 = new TestClass<int,float,TestClass<string>>()

    
//æ³›å‹æ¥å£
    interface TestInterface<T>
    {
        T value{get;set;}
    }

//ç»§æ‰¿
    class Test : TestInterface<int>
    {
        //ä½¿ç”¨è‡ªåŠ¨è¡¥å…¨å®ç°æ¥å£
    }


//æ³›å‹æ–¹æ³•
    public void TestFunc<T>(T value)
    {
        ...
    }

    TestFunc<string>('www')

//å¾—åˆ°ç±»å‹çš„é»˜è®¤å€¼
    public void TestFunc<T>(T value)
    {
        T t = default(T)
    }

```





### æ³›å‹çº¦æŸ 

æ³›å‹å®ç°äº†æ•°æ®ç±»å‹è‡ªé€‰ï¼Œè€Œçº¦æŸå°±æ˜¯ä¸ºäº†ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶è¿™ç§è‡ªé€‰ç¨‹åº¦

6ç§ 

```C#
//where æ³›å‹å­—æ¯ : (æ³›å‹ç±»å‹)
//å€¼ç±»å‹çº¦æŸ struct
class Test1<T> where T : struct { }
Test1<int> t1 = new Test1<int>();

//å¼•ç”¨ç±»å‹çº¦æŸ class
class Test2<T> where T : class { }
Test1<object> t2 = new Test1<object>();

//å­˜åœ¨æ— å‚å…¬å…±æ„é€ çº¦æŸ new()
class Test3<T> where T : new() { }
Test1<Test1> t3 = new Test1<Test1>(); //test1ä¸­å¿…é¡»è¦æœ‰æ— å‚æ„é€ å‡½æ•°

//æŸä¸ªç±»æœ¬èº«æˆ–å…¶æ´¾ç”Ÿç±»  ç±»å
class Test4<T> where T : Test1 { }
Test1<Test1> t4 = new Test1<Test1>(); //å°–æ‹¬å·ä¸­åªèƒ½å¡«test1æˆ–è€…å®ƒçš„å­ç±»

//æŸä¸ªæ¥å£å’Œå…¶æ´¾ç”Ÿç±»  æ¥å£å
interface ITest { }
class Test5 : ITest { }
class Test6<T> where T : ITest { }

Test6<ITest> t6 = new Test6<ITest>(); //ä¸¤ç§éƒ½è¡Œ
Test6<Test5> t6 = new Test6<Test5>();

//å¦ä¸€ä¸ªæ³›å‹ç±»å‹æœ¬èº«æˆ–è€…æ´¾ç”Ÿç±»å‹ å¦ä¸€ä¸ªæ³›å‹å­—æ¯
...
    
```



##### çº¦æŸçš„ç»„åˆä½¿ç”¨

å¯ä»¥ç”¨é€—å·éš”å¼€å†™å¤šä¸ªçº¦æŸ

```C#
class test7<T,K> where T : class,new()
```



##### å¤šä¸ªæ³›å‹å­—æ¯æœ‰çº¦æŸ

```C#
class test7<T,K> where T : struct,where K : class{ }
```



## å¸¸ç”¨æ³›å‹æ•°æ®ç»“æ„ç±»

### List

listæ˜¯ä¸€ä¸ªå¯å˜ç±»å‹çš„æ³›å‹æ•°ç»„ï¼Œä½¿ç”¨æ–¹æ³•å’ŒarrayListå·®ä¸å¤š

##### listå’ŒarrayListçš„åŒºåˆ«ï¼š

1ã€arrayListå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œè€Œliståªèƒ½æŒ‡å®šä¸€ä¸ªç±»å‹è¿›è¡Œå­˜å‚¨ï¼Œlistçš„å®‰å…¨æ€§æ›´é«˜

2ã€listæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒæ˜¯æ³›å‹æ•°ç»„ï¼Œä¼šæå‰åˆ†é…æ•°ç»„å¤§å°ï¼Œè€ŒarrayListæ˜¯objectæ•°ç»„ï¼Œå†æ·»åŠ åˆ é™¤å…ƒç´ æ—¶ä¼šå¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹å’Œç§»åŠ¨



```C#
using System.Collections.Generic;
//å£°æ˜
	List<int> list = new List<int>();
//å¢
	//ä¸€ä¸ªä¸ªåŠ 
    list.Add(1); 

	//æ‰¹é‡åŠ 
    List<int> list1 = new List<int>(){1,2,3};
    list.AddRange(list1); 
	
	//æŒ‡å®šä½ç½®æ·»åŠ 
	list.Insert(index,element);

//åˆ 
    //ç§»é™¤æŒ‡å®šå…ƒç´ 
    list.Remove(1);

    //ç§»é™¤æŒ‡å®šä½ç½®å…ƒç´ 
    list.RemoveAt(0);

    //æ¸…ç©º
    list.Clear();

//æŸ¥
    //æ ¹æ®ä¸‹æ ‡æŸ¥è¯¢æŒ‡å®šä½ç½®çš„å…ƒç´ 
    list[0];

    //æŸ¥çœ‹æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨
    list.Contains(1); //æŸ¥çœ‹listä¸­æ˜¯å¦å­˜åœ¨1

    //æ­£å‘æŸ¥æ‰¾ è¿”å›ä¸‹æ ‡ï¼Œæ‰¾ä¸åˆ°è¿”å›-1
    list.IndexOf(1);

    //åå‘æŸ¥æ‰¾
    list.LastIndexOf(1);

//æ”¹
	list[0] = 114514;

```





### Dictionary å­—å…¸

å­—å…¸å°±æ˜¯æ‹¥æœ‰æ³›å‹çš„æ•£åˆ—è¡¨ï¼Œæ˜¯åŸºäºé”®çš„å“ˆå¸Œä»£ç ç»„ç»‡èµ·æ¥çš„é”®å€¼å¯¹

é”®å€¼å¯¹ç±»å‹ä»æ•£åˆ—è¡¨çš„objectå˜æˆäº†æ³›å‹

```C#
using System.Collections.Generic;
//å£°æ˜
Dictionary<é”®ç±»å‹,å€¼ç±»å‹> dic = new Dictionary<>(é”®ç±»å‹,å€¼ç±»å‹);

//å¢ ä¸èƒ½å‡ºç°ç›¸åŒé”®
dic.Add(é”®,å€¼);

//åˆ  é€šè¿‡é”®åˆ é™¤
dic.Remove(é”®);

//æŸ¥
dic[é”®];
dic.ContainsKey(é”®);
dic.ContainsValue(å€¼);

//éå†é”®
foreach(é”®ç±»å‹ item in dic.Keys)
{
    ...
}

//åŒæ—¶éå†é”®å€¼å¯¹
foreach(KeyValuePair<é”®ç±»å‹,å€¼ç±»å‹> item in dic)
{
    ...
}
```



### é¡ºåºå­˜å‚¨

ç”¨ä¸€ç»„åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒ ä¾æ¬¡å­˜å‚¨ çº¿æ€§è¡¨çš„å„ä¸ªæ•°æ®å…ƒç´ 

æ•°ç»„ï¼Œstackï¼Œqueueï¼Œlistï¼ŒarrayListéƒ½æ˜¯é¡ºåºå­˜å‚¨

åœ¨åŒä¸€ä¸ªåœ°å€ä¸Šè¿ç»­çš„å­˜å‚¨å…ƒç´ 

![uTools_1684894851746](C:\Users\Agares\Downloads\uTools_1684894851746.png)

### é“¾å¼å­˜å‚¨

ä¼˜ç‚¹ï¼šæ¯æ¬¡æ·»åŠ æ•°æ®æ—¶ä¸ä¼šåƒé¡ºåºå­˜å‚¨ä¸€æ ·æ‰©å®¹ï¼Œä¸ä¼šäº§ç”Ÿåƒåœ¾

å•å‘é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ï¼Œç¯å½¢é“¾è¡¨

ç”¨ä¸€ç»„ä»»æ„çš„å­˜å‚¨å•å…ƒ å­˜å‚¨ çº¿æ€§è¡¨ä¸­çš„å„ä¸ªæ•°æ®å…ƒç´ 

æ¯ä¸€ä¸ªæ•°æ®å…ƒç´ å¯èƒ½å­˜åœ¨ä¸åŒä½ç½®ï¼Œé€šè¿‡é“¾æ¥è¿åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰è§„åˆ™

![uTools_1684894906249](C:\Users\Agares\Downloads\uTools_1684894906249.png)



##### å•é¡¹é“¾è¡¨å®ç°

```C#
//é“¾è¡¨èŠ‚ç‚¹
class Link<T>
{
    public T value;
    public Link<T> nextLink;
}

//é“¾è¡¨ç±»ï¼šç®¡ç†èŠ‚ç‚¹
class LinkList<T>
{
    public Link<T> head;
    public Link<T> last;
    //æ·»åŠ èŠ‚ç‚¹
    public void Add(T value)
    {
        Link<T> link = new Link<T>(value);
        if(head == null)
        {
            head = link;
            last = link; //ä¸¤è€…æŒ‡å‘ä¸€ä¸ªä¸œè¥¿
        }
        else
        {
            last.nextLink = link;
            last = link;
        }
    }
    //åˆ é™¤èŠ‚ç‚¹
    public void Remove(T value)
    {
        if(head == null) //é“¾è¡¨æ²¡æœ‰å†…å®¹æ—¶
            return;
        if(head.value.Equals(value)) //æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹
        {
            head = head.nextLink; //ç§»é™¤å¤´èŠ‚ç‚¹
            if(head == null) //ç§»é™¤å¤´èŠ‚ç‚¹åå¦‚æœä¸ºç©ºï¼Œè¯´æ˜åªå­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¦æ¸…ç©ºå°¾éƒ¨
            {
                last = null;
            }
            return;
        }
        
        Link<T> linkNode = head;
        while(linkNode.nextLink != null)
        {
            if(linkNode.nextLink.value.Equals(value))
            {
                //æ‰¾åˆ°å…ƒç´ åè®©è¯¥å…ƒç´ çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘è¯¥å…ƒç´ çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                linkNode.nextLink = linkNode.nextLink.nextLink;
                break;
            }
            //è®©åˆ é™¤å…ƒç´ çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œåˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥
            linkNode = linkNode.nextNode;
		}
    }
    
}
```



##### é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨çš„ä¼˜ç¼ºç‚¹ï¼š

é“¾å¼å­˜å‚¨è®¡ç®—ä¸Šä¼˜äºé¡ºåºå­˜å‚¨ï¼Œä¸­é—´å¢åŠ å’Œåˆ é™¤æ—¶ä¸ç”¨åƒé¡ºåºå­˜å‚¨ä¸€æ ·éœ€è¦ç§»åŠ¨ä½ç½®

é¡ºåºå­˜å‚¨ä½¿ç”¨ä¸Šä¼˜äºé“¾å¼å­˜å‚¨ï¼Œé¡ºåºå­˜å‚¨å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡å¾—åˆ°å…ƒç´ ï¼Œè€Œé“¾å¼éœ€è¦éå†



### LinkedList

LinkedListæ˜¯ä¸€ä¸ªå¯å˜ç±»å‹çš„æ³›å‹åŒå‘é“¾è¡¨



```C#
using System.CollectionsGeneric;

//å£°æ˜
LinkedList<int> linkedList = new LinkedList<int>();

//å¢
linkedList.AddLast(10); //åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ 
linkedList.AddFirst(20); //åœ¨é“¾è¡¨å¤´éƒ¨æ·»åŠ 
//åœ¨æŸä¸ªèŠ‚ç‚¹ä¹‹åæ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹,å°±æ˜¯æ’å…¥
LinkedListNode<int> node = linkedList.Find(3); //1ã€æ‰¾åˆ°è¦æ’å…¥çš„èŠ‚ç‚¹
linkedList.AddAfter(node,15); //2ã€åœ¨nodeèŠ‚ç‚¹åæ·»åŠ 15èŠ‚ç‚¹


//åˆ é™¤
linkedList.RemoveFirst(); //åˆ é™¤å¤´èŠ‚ç‚¹
linkedList.RemoveLast(); //åˆ é™¤å°¾èŠ‚ç‚¹
linkedList.Remove(20); //åˆ é™¤æŒ‡å®šå…ƒç´ ï¼Œæ— æ³•é€šè¿‡ä½ç½®åˆ é™¤
linkedList.Clear(); //æ¸…ç©º

//æŸ¥
LinkedListNode<int> first = linkedList.First; //å¾—åˆ°å¤´èŠ‚ç‚¹
LinkedListNode<int> last = linkedList.Last; //å¾—åˆ°å°¾èŠ‚ç‚¹
LinkedListNode<int> node = linkedList.Find(3); //æ ¹æ®å€¼æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°è¿”å›ç©º

//åˆ¤æ–­æ˜¯å¦å­˜åœ¨
linkedList.Contains(10); //åˆ¤æ–­æ˜¯å¦å­˜åœ¨10

//æ”¹ å¾—åˆ°èŠ‚ç‚¹åé€šè¿‡.Valueå½¢å¼ä¿®æ”¹
linkedList.First.Value = 886; //ä¿®æ”¹å¤´èŠ‚ç‚¹çš„å€¼

//éå†
//1ã€foreach
foreach(int item in linkedList)
{
    Console.WriteLine(item); //å¾—åˆ°æ¯ä¸€ä¸ªçš„å€¼ï¼Œè€Œä¸æ˜¯èŠ‚ç‚¹å¯¹è±¡
}

//2ã€ä»å¤´åˆ°å°¾
LinkedListNode<int> head = linkedList.First;
while(head != null)
{
    Console.WriteLine(head.Value);
    head = head.Next;
}

//3ã€ä»å°¾åˆ°å¤´
LinkedListNode<int> node = linkedList.Last;
while(node != null)
{
    Console.WriteLine(node.Value);
    node = node.Previous; //è®©å½“å‰èŠ‚ç‚¹ç­‰äºä¸Šä¸€ä¸ªèŠ‚ç‚¹
}
```



### æ³›å‹æ ˆå’Œé˜Ÿåˆ—

```C#
Stack<int> stack = new Stack<int>();
Queue<object> queue = new Queue<object>();
```



### å§”æ‰˜ delegate

å§”æ‰˜ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å˜é‡ç±»å‹ï¼Œæ˜¯ç”¨æ¥å­˜å‚¨ï¼Œä¼ é€’å‡½æ•°çš„å®¹å™¨ï¼Œä¸åŒçš„å‡½æ•°å¿…é¡»å¯¹åº”ä¸å„è‡ªæ ¼å¼ï¼ˆå‚æ•°/è¿”å›å€¼ï¼‰ä¸€è‡´çš„å§”æ‰˜

å§”æ‰˜ä½œç”¨ï¼šä½œä¸ºç±»çš„æˆå‘˜/ä½œä¸ºå‡½æ•°çš„å‚æ•°

```C#
//ä¹¦å†™ä½ç½®ï¼šnamespace
//å®šä¹‰è‡ªå®šä¹‰å§”æ‰˜ï¼Œè®¿é—®ä¿®é¥°ç¬¦é»˜è®¤public
delegate void Func();

//å§”æ‰˜å˜é‡æ˜¯å‡½æ•°çš„å®¹å™¨
static void Test(){}
////è£…è½½å‡½æ•°çš„ä¸¤ç§å†™æ³•
Func f1 = new Func(Test); //Testå°±æ˜¯f1ï¼Œåªæ˜¯è½¬è½½ï¼Œä¸ä¼šè°ƒç”¨
Func f2 = Test; 
//è°ƒç”¨å‡½æ•°çš„ä¸¤ç§å†™æ³•
f1.Invoke(); 
f2();

//ç”¨å§”æ‰˜å­˜å‚¨å¤šä¸ªå‡½æ•° ä¹Ÿå«å¤šæ’­å§”æ‰˜
Func f3 = Test; 
f3 += Test;
f3(); //æ­¤æ—¶ä¼šæŒ‰ç…§æ·»åŠ é¡ºåºæ‰§è¡Œå§”æ‰˜ä¸­å­˜å‚¨çš„æ‰€ä»¥æ–¹æ³•

//ç§»é™¤æŒ‡å®šçš„å‡½æ•°
Func f4 = Test; 
f4 -= Test;

//å½“å®¹å™¨ä¸ºç©ºæ—¶ï¼Œå¦‚æœå£°æ˜æ–¹å¼æ˜¯èµ‹å€¼ä¸ºnullï¼Œå°±å¯ä»¥åœ¨ç©ºçš„çŠ¶æ€ä¸‹æ·»åŠ åˆ é™¤ï¼Œå£°æ˜æ—¶æœªèµ‹å€¼ï¼Œå°±ä¸èƒ½ç›´æ¥å¢åˆ ï¼Œåªèƒ½å…ˆèµ‹å€¼ï¼Œæœ€å¥½å…ˆåˆ¤ç©ºå†è°ƒç”¨

//ç³»ç»Ÿè‡ªå¸¦çš„å§”æ‰˜
//1ã€Action  æ— å‚æ— è¿”å›å€¼å§”æ‰˜
Action ac = Test;
//ä¼ é€’nä¸ªå‚æ•° 
static void Test4(int a,string b,bool c){};
Action<int,string,bool> ac = Test4;

//2ã€Func<ç±»å‹>  æœ‰æŒ‡å®šç±»å‹è¿”å›å€¼çš„æ³›å‹å§”æ‰˜
static int Test1() { return 0; }
Func<int> func = Test1;
//Func<> å°±ç›¸å½“äºğŸ‘‡
delegate T Test2<T,K>(T t,K k);
//ä¼ é€’nä¸ªå‚æ•°
static int Test5(int a){ return a; }
Func<int,int> func = Test5; //Func<å‚æ•°ç±»å‹,è¿”å›å€¼ç±»å‹>
//ä¼ é€’å¤šä¸ªå‚æ•°æ—¶ï¼Œå°–æ‹¬å·ä¸­æœ€åä¸€ä¸ªæ˜¯è¿”å›å€¼çš„ç±»å‹ï¼Œå…¶ä½™æ˜¯å…¶ä»–å‚æ•°çš„ç±»å‹
//ä¾‹å¦‚Func<int,string,bool>å°±æ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆint,stringï¼‰çš„è¿”å›å€¼ä¸ºboolç±»å‹çš„å§”æ‰˜
```



### äº‹ä»¶ event

äº‹ä»¶å°±æ˜¯å—çº¦æŸçš„å§”æ‰˜

äº‹ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ç±»å‹ï¼Œæ˜¯åŸºäºå§”æ‰˜çš„å­˜åœ¨ï¼Œå®ƒèƒ½è®©å§”æ‰˜çš„ä½¿ç”¨æ›´å…·æœ‰å®‰å…¨æ€§

ç”¨æ³•å’Œå§”æ‰˜ä¸€æ ·ï¼Œä½†æ˜¯åªèƒ½ä½œä¸ºæˆå‘˜å­˜åœ¨äºç±»å’Œæ¥å£ä»¥åŠç»“æ„ä½“ä¸­

äº‹ä»¶å’Œå§”æ‰˜çš„åŒºåˆ«ï¼šäº‹ä»¶ä¸èƒ½å†ç±»å¤–éƒ¨èµ‹å€¼å’Œè°ƒç”¨ï¼Œä½†æ˜¯å¯ä»¥æ·»åŠ åˆ é™¤ï¼Œè¦è°ƒç”¨åªèƒ½é€šè¿‡ç±»ä¸­å°è£…æ–¹æ³•è°ƒç”¨ï¼Œæ¯”å§”æ‰˜æ›´å®‰å…¨

äº‹ä»¶ä¸èƒ½ä½œä¸ºä¸´æ—¶å˜é‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå§”æ‰˜å¯ä»¥

```C#
class Test
{
    //å§”æ‰˜æˆå‘˜å˜é‡ 
    public Action action;
    //äº‹ä»¶æˆå‘˜å˜é‡ éƒ½æ˜¯ç”¨æ¥å­˜å‚¨æ–¹æ³•
    public event Action event;
    
    //ä½¿ç”¨æ–¹æ³•å’Œå§”æ‰˜ä¸€æ¨¡ä¸€æ ·
    
    //å¯ä»¥ä½¿ç”¨ += / -= æ¥æ·»åŠ æˆ–è€…ç§»é™¤ï¼Œä½†æ˜¯ä¸èƒ½æ‹†è§£æˆ xx = xx + xx çš„å½¢å¼ï¼Œå¤§æ¦‚æ˜¯åªé‡è½½äº† += å’Œ -= çš„è¿ç®—ç¬¦
    
}
```



### åŒ¿åå‡½æ•°

åŒ¿åå‡½æ•°æ˜¯ç”¨æ¥é…åˆå§”æ‰˜å’Œäº‹ä»¶ä½¿ç”¨çš„ï¼Œè„±ç¦»å§”æ‰˜å’Œäº‹ä»¶ï¼Œå°±ä¸ä¼šä½¿ç”¨åŒ¿åå‡½æ•°

##### åŒ¿åå‡½æ•°çš„ä½¿ç”¨

```C#
//æ— å‚æ•° æ— è¿”å›å€¼
Action ac = delegate(){ ... }; //å£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°å¹¶å­˜å‚¨åœ¨å§”æ‰˜acä¸­ï¼Œå¦‚æœåªå£°æ˜ä¸ä½¿ç”¨å°±ä¼šæŠ¥é”™ï¼Œå¿…é¡»è¦ä¸å§”æ‰˜æˆ–äº‹ä»¶ä¸€èµ·ä½¿ç”¨

//æœ‰å‚æ•° æœ‰è¿”å›å€¼
Func<string> func = delegate(int a)
{
    return "P5Rå¤©ä¸‹ç¬¬ä¸€"; //è¿”å›çš„æ˜¯å•¥ç±»å‹å°±æ˜¯å•¥ç±»å‹ï¼Œä¸ç”¨ä¸»åŠ¨å£°æ˜
}

//åŒ¿åå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ æˆ–è€… ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼
class Test
{
    public Action ac;
    public void Func1(Action ac){ ... }
    public Action Fun2()
    { 
        //ä½œä¸ºå‡½æ•°è¿”å›å€¼ä¼ é€’æ—¶
        return delegate(){...};
    }
}
//ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’æ—¶
Test t = new Test();
t.Fun1(delegate(){...})

//ä½œä¸ºå‡½æ•°è¿”å›å€¼ä¼ é€’æ—¶
t.Fun2()(); //ç›´æ¥è°ƒç”¨ï¼ŒFunc2()è¡¨ç¤ºæ–¹æ³•æœ¬èº«ï¼Œç¬¬äºŒä¸ª()è°ƒç”¨
Action ac = t.Fun2();
ac(); //ç¬¬äºŒç§è°ƒç”¨æ–¹å¼

//ç¼ºç‚¹ï¼šå› ä¸ºåŒ¿åå‡½æ•°æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥æ·»åŠ åˆ°å§”æ‰˜åæ— æ³•æŒ‡å®šç§»é™¤ï¼Œåªèƒ½æ¸…ç©º

```



### lambdaè¡¨è¾¾å¼

å°±æ˜¯åŒ¿åå‡½æ•°çš„ç®€å†™ï¼Œä½¿ç”¨ä¸Šå’ŒåŒ¿åå‡½æ•°ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸å§”æ‰˜æˆ–è€…äº‹ä»¶é…åˆä½¿ç”¨

```C#
//è¯­æ³•
(å‚æ•°åˆ—è¡¨) => { ... }

//æ— å‚æ•° æ— è¿”å›å€¼
Action ac = () => { ... };
//æœ‰å‚æ•° æœ‰è¿”å›å€¼ ï¼ˆå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œç±»å‹è¦å’Œå§”æ‰˜/äº‹ä»¶ä¸€è‡´ï¼‰
Func<int,string> func = (a) => {return "å“ˆå“ˆ";};
```



##### é—­åŒ…

å†…å±‚å‡½æ•°å¯ä»¥å¼•ç”¨åŒ…å«åœ¨å®ƒå¤–å‡ºçš„å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–å±‚å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•

è¯¥å˜é‡æä¾›çš„å€¼å¹¶éå˜é‡åˆ›å»ºæ—¶çš„å€¼ï¼Œè€Œæ˜¯çˆ¶å‡½æ•°èŒƒå›´å†…çš„æœ€ç»ˆå€¼ 

åŒ¿åå‡½æ•°ä½“ä¸­å¦‚æœä½¿ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªå˜é‡æ‹·è´åˆ°å †ä¸Šï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åè¿˜èƒ½ä½¿ç”¨

ç¼ºç‚¹å’ŒåŒ¿åå‡½æ•°ä¸€æ ·ï¼Œæ— æ³•æŒ‡å®šç§»é™¤

```C#
public event Action ac;
public Test()
{
    int i = 10; 
    ac = () => 
    {
        Console.WriteLine(i); 
        //å¯¼è‡´ä¸´æ—¶å£°æ˜çš„å˜é‡iç”Ÿå‘½å‘¨æœŸè¢«æ”¹å˜ï¼Œä¸å†è¢«é‡Šæ”¾ï¼Œå½¢æˆé—­åŒ…
    }
    
    //è¯¥å˜é‡æä¾›çš„å€¼å¹¶éå˜é‡åˆ›å»ºæ—¶çš„å€¼ï¼Œè€Œæ˜¯çˆ¶å‡½æ•°èŒƒå›´å†…çš„æœ€ç»ˆå€¼ 
	for(int i = 0; i < 10; i++)
    {
        ac += () =>
        {
            Console.WriteLine(i);
            //æ¯æ¬¡å¾ªç¯éƒ½æ·»åŠ ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç„¶åä¸€æ¬¡æ€§æ‰“å°
            //æ‰€ä»¥å†æ‰§è¡Œæ‰“å°æ—¶ï¼Œå¾ªç¯æ—©å·²ç»“æŸï¼Œiçš„æœ€åå€¼æ˜¯10ï¼Œï¼Œæ‰€ä»¥ä¼šæ‰“å°10ä¸ª10 
            //å¦‚æœæƒ³è¦æ‰“å°0-9ï¼Œå¯ä»¥ä¸´æ—¶å£°æ˜ä¸€ä¸ªå˜é‡å­˜å‚¨ï¼Œæ¯æ¬¡å¾ªç¯ä¸´æ—¶å˜é‡éƒ½ä¸ä¸€æ ·
        }
    }

}
```





### Listæ’åº

```C#
List<int> list = new List<int>(){1,2,3};
//å‡åº
list.Sort();
//è‡ªå®šä¹‰ç±»æ’åº
class Test : IComparable<Test> //ç»§æ‰¿æ’åºæ¥å£
{
    public int money;
    public Test(int money)
    {
        this.money = money;
    }
    //å®ç°æ¥å£
    public int CompareTo([AllowNull] Test other) //[AllowNull]ï¼šä¸ä¸ºç©º
    {
        //é€šè¿‡è¿”å›å€¼æ’åºï¼Œå°äº0æ”¾åœ¨ä¼ å…¥å¯¹è±¡çš„å‰é¢ï¼Œç­‰äº0ä½ç½®ä¸å˜ï¼Œå¤§äº0æ”¾åœ¨åé¢,
        //ä¼ å…¥å¯¹è±¡çš„ä½ç½®å°±æ˜¯0ï¼Œè¿”å›è´Ÿæ•°ï¼Œå°±æ’åœ¨å®ƒçš„å‰é¢
        if(this.money > other.money) //å‡åºæ’ï¼Œé™åºå°±åè¿‡æ¥
            return 1;
        else return -1;
    }
}
List<Test> testList = new List<Test>();
testList.Add(new Test(20));
testList.Add(new Test(50));
testList.Add(new Test(10));
testList.Sort();

//å§”æ‰˜æ’åºï¼šé€šè¿‡ä¸€ä¸ªä¼ é€’æ–¹æ³•çš„sorté‡è½½
class Test
{
    public int id;
    public Test(int id)
    {
        this.id = id;
    }
}

class Program
{
    static void Main(string[] args)
    {
        List<Test> list = new List<Test>();
        list.Add(new Test(1));
        list.Add(new Test(3));
        list.Add(new Test(2));
        list.Sort(DeleSort);

        static int DeleSort(Test t1,Test t2)
        {
            return (t1.id > t2.id) ? 1 : -1;
        }

        for (int i = 0; i < list.Count; i++)
        {
            Console.WriteLine(list[i].id); //è¾“å‡ºäº† 1 2 3
        }
        
        //æœ€ç®€ä»‹çš„å†™æ³•
        list.Sort((t1,t2)=>{return (t1.id > t2.id) ? 1 : -1});
    }
}
```

ç³»ç»Ÿè‡ªå¸¦çš„å˜é‡ï¼ˆint,float,double...) ä¸€èˆ¬å¯ä»¥ç›´æ¥ä½¿ç”¨sort

è‡ªå®šä¹‰ç±»æ’åºæœ‰ä¸¤ç§æ–¹å¼

1ã€ç»§æ‰¿æ¥å£ IComparable

2ã€åœ¨sortä¸­ä¼ å…¥å§”æ‰˜å‡½æ•°



### åå˜é€†å˜

å°±æ˜¯é‡Œæ°æ›¿æ¢åŸåˆ™åœ¨æ³›å‹ä¸­çš„ä½“ç°ï¼Œç”¨outå’Œinä¿®é¥°çš„æ³›å‹å§”æ‰˜å¯ä»¥ç›¸äº’è½¬è½½ï¼ˆæœ‰çˆ¶å­å…³ç³»çš„æ³›å‹ï¼‰

åå˜ out å­ç±»å˜çˆ¶ç±»

é€†å˜ in çˆ¶ç±»å˜å­ç±»

```C#
//1ã€ç”¨äºæ³›å‹æ¥å£å’Œæ³›å‹å§”æ‰˜ä¸­ä¿®é¥°æ³›å‹å­—æ¯
//ç”¨outä¿®é¥°çš„æ³›å‹ åªèƒ½ä½œä¸ºè¿”å›å€¼
delegate T TestOut<out T>();
//ç”¨inä¿®é¥°çš„æ³›å‹ åªèƒ½ä½œä¸ºå‚æ•°
delegate void TestIn<in T>(T t);

//2ã€ç»“åˆé‡Œæ°æ›¿æ¢åŸåˆ™
delegate T TestOut<out T>();
class Father { }
class Son : Father { }
TestOut<Son> s = () => { }
TestOut<Father> f = s; //åŠ ä¸Šoutåä¼šè‡ªåŠ¨æ ¹æ®é‡Œæ°æ›¿æ¢åŸåˆ™åˆ¤æ–­è¿”å›å€¼æ˜¯å¦å­˜åœ¨çˆ¶å­å…³ç³»
```



### å¤šçº¿ç¨‹

##### è¿›ç¨‹ process

![uTools_1685003453806](C:\Users\Agares\Downloads\uTools_1685003453806.png)



æ“ä½œç³»ç»Ÿæä¾›è¿è¡Œç¯å¢ƒï¼Œæ¯ä¸ªè¿è¡Œçš„åº”ç”¨ç¨‹åºéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹

è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€

ä¹Ÿæ˜¯è®¡ç®—æœºä¸­ç¨‹åºå…³äºæŸæ•°æ®é›†åˆçš„ä¸€æ¬¡è¿è¡Œè·å¾—

##### çº¿ç¨‹

æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½

çº¿ç¨‹åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½

ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹

è¿›ç¨‹è¿è¡Œæ—¶å°±æ˜¯é€šè¿‡æ‰§è¡Œçº¿ç¨‹çš„ä»£ç 

çº¿ç¨‹å°±æ˜¯ä»£ç ä»ä¸Šåˆ°ä¸‹è¿è¡Œçš„ä¸€æ¡â€œç®¡é“â€

![uTools_1685004096907](C:\Users\Agares\Downloads\uTools_1685004096907.png)

##### å¤šçº¿ç¨‹



![uTools_1685004478267](C:\Users\Agares\Downloads\uTools_1685004478267.png)

åŒæ—¶è¿è¡Œä»£ç çš„å¤šæ¡â€œç®¡é“â€ï¼Œå°±å«å¤šçº¿ç¨‹

å¯ä»¥åŒä¸€æ—¶é—´åˆ†æ‰¹å¤„ç†ä¸åŒçš„é€»è¾‘

ç”¨æ¥å¤„ç†ä¸€äº›æ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½ä¼šå½±å“ä¸»çº¿ç¨‹æµç•…åº¦çš„é€»è¾‘

##### çº¿ç¨‹ç±» Thread

```C#
//å£°æ˜ä¸€ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹ä¸­çš„ä»£ç ï¼Œéœ€è¦ç”¨ä¸€ä¸ªå‡½æ•°å°è£…ï¼‰
Thread t = new Thread(ThreadFunc);
static void ThreadFunc(){ ... }
    
//å¼€å¯çº¿ç¨‹
t.Start();

//è®¾ç½®ä¸ºåå°çº¿ç¨‹
//æ¯”å¦‚æœ‰ä¸€ä¸ªéœ€è¦æ­»å¾ªç¯çš„çº¿ç¨‹ï¼Œå°±å¯ä»¥è®¾ç½®ä¼šåå°çº¿ç¨‹
//å‰å°çº¿ç¨‹ç»“æŸåï¼Œå³ä½¿åå°è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œç¨‹åºä¹Ÿä¼šç»“æŸ
//åå°çº¿ç¨‹ä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„ç»“æŸ
//å¦‚æœä¸è®¾ç½®ä¸ºåå°çº¿ç¨‹ï¼Œå¯èƒ½å¯¼è‡´è¿›ç¨‹æ— æ³•æ­£å¸¸å…³é—­
t.isBackground = true;

//å…³é—­é‡Šæ”¾ä¸€ä¸ªçº¿ç¨‹
//å¦‚æœå¼€å¯çš„çº¿ç¨‹ä¸æ˜¯æ­»å¾ªç¯ï¼Œå¯ä»¥ä¸ç”¨åˆ»æ„å»å…³é—­å®ƒ
//1ã€ç½®ç©ºçº¿ç¨‹
t = null; 
//2ã€boolæ ‡è¯†ï¼Œé€šè¿‡boolå˜é‡æ§åˆ¶å¾ªç¯
//3ã€ä¸­æ­¢çº¿ç¨‹ ï¼ˆç›´æ¥åœ¨æ§åˆ¶å°æ‰§è¡Œä¼šæŠ¥é”™ï¼‰
t.Abort();
```



##### çº¿ç¨‹ä¼‘çœ 

```C#
//åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå°±ä¼‘çœ å“ªä¸ªçº¿ç¨‹
Thread.Sleep(æ¯«ç§’æ•°); //è®©çº¿ç¨‹ä¼‘çœ xxæ¯«ç§’ï¼Œxxç§’åçº¿ç¨‹ç»§ç»­æ‰§è¡Œ
```



##### çº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®

å¤šä¸ªå†…å­˜ä½¿ç”¨çš„å†…å­˜æ˜¯å…±äº«çš„ï¼Œéƒ½å±äºè¿›ç¨‹

æ‰€ä»¥å½“å¤šçº¿ç¨‹åŒæ—¶æ“ä½œåŒä¸€ç‰‡å†…å­˜åŒºåŸŸæ—¶å°±å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åŠ é”é¿å…

ç¼ºç‚¹ï¼šä¼šå½±å“çº¿ç¨‹çš„æ•ˆç‡

```C#
//lock å½“åœ¨å¤šçº¿ç¨‹å½“ä¸­ï¼Œå¯¹åŒä¸€ä¸ªä¸œè¥¿è¿›è¡Œé€»è¾‘å¤„ç†æ—¶
//ä¸ºäº†é¿å…æ‰§è¡Œé¡ºåºæ··ä¹±
lock(å¼•ç”¨ç±»å‹å¯¹è±¡) //æ²¡æœ‰é”æ—¶æ‰ä¼šæ‰§è¡Œé‡Œé¢çš„ä»£ç 
{
    //æ‰§è¡Œé‡Œé¢çš„é€»è¾‘æ—¶ä¼šé”ä½lockæ‹¬å·å†…çš„å¯¹è±¡
    //å…¨éƒ¨æ‰§è¡Œå®Œæˆåä¼šè§£é”
}
```



### é¢„å¤„ç†å™¨æŒ‡ä»¤

é¢„å¤„ç†å™¨æŒ‡ä»¤å¯ä»¥çŸ¥é“ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å¼€å§‹ä¹‹å‰å¯¹ä¿¡æ¯è¿›è¡Œé¢„å¤„ç†

é¢„å¤„ç†å™¨æŒ‡ä»¤éƒ½æ˜¯ä»¥å¼€å§‹

é¢„å¤„ç†å™¨æŒ‡ä»¤ä¸æ˜¯è¯­å¥ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ä»¥åˆ†å·ï¼›ç»“æŸ



##### å¸¸è§çš„é¢„å¤„ç†å™¨æŒ‡ä»¤

```C#
//1ã€æŠ˜å ä»£ç å—
#region
    ...
#endregion
    
//2ã€å®šä¹‰ä¸€ä¸ªç¬¦å·ï¼Œå†™åœ¨æ•´ä¸ªè„šæœ¬çš„æœ€å‰é¢ï¼Œä¸€èˆ¬é…åˆifä½¿ç”¨
#define PC
#undef PC  //å–æ¶ˆå®šä¹‰ä¸€ä¸ªç¬¦å·
    
#if PC  //å¦‚æœæœ‰PCè¿™ä¸ªç¬¦å·ï¼Œé‚£ä¹ˆå…¶ä¸­åŒ…å«çš„ä»£ç å°±ä¼šè¢«ç¼–è¯‘
    Console.WriteLine("C#ä½ è®©æˆ‘ç–¯ç‹‚")
    
#elif //å¯é€‰
#else //å¯é€‰
#endif //ä¸ifé…å¯¹
//ä½œç”¨ï¼šå¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å“ªä¸ªå¹³å°å’Œæ“ä½œç³»ç»Ÿä»¥åŠunityç‰ˆæœ¬ï¼Œåˆ†åˆ«å¤„ç†ä¸åŒçš„é€»è¾‘
    
//3ã€æç¤ºè­¦å‘Š/é”™è¯¯ï¼Œé…åˆifä½¿ç”¨
#if
	#waring è­¦å‘Šï¼šä¸æ”¯æŒå½“å‰ç‰ˆæœ¬
    #error æŠ¥é”™å•¦
#endif
```



### åå°„å’Œç‰¹æ€§

##### ç¨‹åºé›†

ç¨‹åºé›†æ˜¯ç”±ç¼–è¯‘å™¨ç¼–è¯‘å ä¾›è¿›ä¸€æ­¥ç¼–è¯‘æ‰§è¡Œçš„ä¸­é—´äº§ç‰©

ä¸€èˆ¬è¡¨ç°ä¸º.dll(åº“æ–‡ä»¶)æˆ–è€….exe(å¯æ‰§è¡Œæ–‡ä»¶)çš„æ ¼å¼

ç¨‹åºé›†å°±æ˜¯å°†æ‰€æœ‰ä»£ç æ‰“åŒ…èµ·æ¥çš„é›†åˆ

ä¸€ä¸ªé¡¹ç›®å†™çš„æ‰€æœ‰ä»£ç ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«ç¼–è¯‘å™¨ç¿»è¯‘ä¸ºä¸€ä¸ªç¨‹åºé›†ä¾›åˆ«äººä½¿ç”¨



##### å…ƒæ•°æ®

å…ƒæ•°æ®å°±æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„æ•°æ®

æ¯”å¦‚ç¨‹åºä¸­çš„ç±»ï¼Œå‡½æ•°ï¼Œå˜é‡ç­‰ä¿¡æ¯å°±æ˜¯ç¨‹åºçš„å…ƒæ•°æ®



##### åå°„

ç¨‹åºæ­£åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥æŸ¥çœ‹å…¶å®ƒç¨‹åºé›†æˆ–è€…è‡ªèº«çš„å…ƒæ•°æ®
ä¸ªè¿è¡Œçš„ç¨‹åºæŸ¥çœ‹æœ¬èº«æˆ–è€…å…¶å®ƒç¨‹åºçš„å…ƒæ•°æ®çš„è¡Œä¸ºå°±å«åšåå°„
è¯´äººè¯ï¼š
åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œé€šè¿‡åå°„å¯ä»¥å¾—åˆ°å…¶å®ƒç¨‹åºé›†æˆ–è€…è‡ªå·±ç¨‹åºé›†ä»£ç çš„å„ç§ä¿¡æ¯
ç±»ï¼Œå‡½æ•°ï¼Œå˜é‡ï¼Œå¯¹è±¡ç­‰ç­‰ï¼Œå®ä¾‹åŒ–å®ƒä»¬ï¼Œæ‰§è¡Œå®ƒä»¬ï¼Œæ“ä½œå®ƒä»¬

##### åå°„çš„ä½œç”¨

å› ä¸ºåå°„å¯ä»¥åœ¨ç¨‹åºç¼–è¯‘åè·å¾—ä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒæé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§å’Œçµæ´»æ€§
1.ç¨‹åºè¿è¡Œæ—¶å¾—åˆ°æ‰€æœ‰å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å…ƒæ•°æ®çš„ç‰¹æ€§
2.ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ä¾‹åŒ–å¯¹è±¡ï¼Œæ“ä½œå¯¹è±¡
3.ç¨‹åºè¿è¡Œæ—¶åˆ›å»ºæ–°å¯¹åƒï¼Œç”¨è¿™äº›å¯¹è±¡æ‰§è¡Œä»»åŠ¡.



```C#
class Test
{
    public a = 0;
    public Test() { ... }
}

//Typeï¼šç±»çš„ä¿¡æ¯ç±»ï¼Œæ˜¯è®¿é—®å…ƒæ•°æ®çš„ä¸»è¦æ–¹å¼
//1ã€object.GetType() æ–¹æ³•å¯ä»¥è·å–å¯¹è±¡çš„Type
int a = 10;
Type type1 = a.GetType();

//2ã€typeof(ç±»å) ä¸€èˆ¬åœ¨åŒä¸€ä¸ªç¨‹åºé›†ä¸­ä½¿ç”¨
Type type2 = typeof(int);

//3ã€é€šè¿‡ç±»çš„åå­—æ¥è·å–ç±»å‹ï¼Œç±»åå¿…é¡»åŒ…å«å‘½åç©ºé—´
Type type3 = Type.GetType("System.Int32");
//type1ã€2ã€3 æŒ‡å‘å †ä¸­çš„åŒä¸€å—å†…å­˜

//ç¨‹åºé›†ç±» Assembly
type1.Assembly //å¾—åˆ°ç±»çš„ç¨‹åºé›†ä¿¡æ¯
    
//è·å–ç±»ä¸­çš„æ‰€æœ‰å…¬å…±æˆå‘˜
Type t = typeof(Test);
MemberInfo[] infos = t.GetMembers();

//è·å–æ‰€æœ‰æ„é€ å‡½æ•°
ConstructorInfo[] ctors = t.GetConstructors();

//è·å–å…¶ä¸­çš„ä¸€ä¸ªæ„é€ å‡½æ•°å¹¶æ‰§è¡Œ
//è·å–æ— å‚æ„é€  
//è·å–æ„é€ å‡½æ•°ä¼ å…¥typeæ•°ç»„ï¼Œæ•°ç»„å†…å®¹æŒ‰ç…§é¡ºåºæ˜¯å‚æ•°ç±»å‹
//æ‰§è¡Œæ„é€ å‡½æ•°ä¼ å…¥objectæ•°ç»„ æ ‡è¯†æŒ‰é¡ºåºä¼ å…¥çš„å‚æ•°
ConstructorInfo info = t.GetConstructor(new Type[0]); //é•¿åº¦ä¸º0ï¼Œæ²¡æœ‰å‚æ•°
Test t = info.Invoke(null) as Test; //æ‰§è¡Œï¼Œæ— å‚ä¼ nullå³å¯

//è·å–æœ‰å‚æ„é€ 
ConstructorInfo info = t.GetConstructor(new Type[]{ typeof(int)}) //å†³å®šç±»å‹
Test t = info.Invoke(new object[] { 10 }) as Test; //ä¼ å¯¹åº”çš„å‚æ•°

//è·å–ç±»çš„å…¬å…±æˆå‘˜å˜é‡
//1ã€è·å–æ‰€æœ‰æˆå‘˜å˜é‡
FieldInfo[] f = t.GetFields();

//2ã€è·å–æŒ‡å®šåç§°çš„å…¬å…±æˆå‘˜å˜é‡
FieldInfo infoName = t.GetField("name");

//3ã€é€šè¿‡åå°„è·å–/è®¾ç½®å¯¹è±¡çš„å€¼
Test test = new Test(infoName.GetValue(test)); //è·å–testçš„infoNameçš„å€¼
infoName.SetValue(test,"666")
    
//è·å–ç±»çš„å…¬å…±æˆå‘˜æ–¹æ³•
Type type = typeof(string);
MethodInfo[] ms = type.GetMethods("Substring",new Type[] {typeof(int),typeof(string)});
type.Invoke(è¦å“ªä¸ªå¯¹è±¡æ‰§è¡Œ,new object[]{111,"xxx"})
//æ³¨æ„ï¼šå¦‚æœæ˜¯é™æ€æ–¹æ³•Invokeä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ nullå³å¯
```



####  Axtivator 

ç”¨äºåå°„å¿«é€Ÿå®ä¾‹åŒ–å¯¹è±¡

```C#
Type type = typeof(type);  //å¾—åˆ°type
//é»˜è®¤è°ƒç”¨æ— å‚æ„é€ 
Activator.CreateInstance(type) as Test;  //Testæ˜¯ä¸Šé¢çš„ç±»
//æœ‰å‚æ„é€ 
Activator.CreateInstance(type,å®å‚) as Test; //ä¼šè‡ªåŠ¨åˆ¤æ–­å‚æ•°ç±»å‹

```



#### Assembly

ç¨‹åºé›†ç±»ï¼Œç”¨æ¥åŠ è½½å…¶ä»–ç¨‹åºé›†

æƒ³è¦ä½¿ç”¨éå·±ç¨‹åºé›†ä¸­çš„å†…å®¹ï¼Œéœ€è¦å…ˆåŠ è½½ç¨‹åºé›†ï¼ŒåŠ è½½åï¼Œæ‰èƒ½ç”¨typeæ¥ä½¿ç”¨å…¶ä»–ç¨‹åºé›†ä¸­çš„å†…å®¹

```C#
//åŠ è½½åŒä¸€æ–‡ä»¶ä¸‹çš„å…¶ä»–ç¨‹åºé›†
Assembly ass1 = Assembly.Load("ç¨‹åºé›†åç§°");
//åŠ è½½ä¸€ä¸ªæŒ‡å®šç¨‹åºé›†
Assembly ass2 = Assembly.LoadFrom(@"è·¯å¾„"); //@å¯ä»¥å–æ¶ˆè½¬ä¹‰å­—ç¬¦

//è·å–ç¨‹åºé›†é‡Œå…ƒæ•°æ®
Type[] types = ass2.GetTypes();
```



#### ç‰¹æ€§

è¿˜æ²¡çœ‹



### è¿­ä»£å™¨

è¿­ä»£å™¨æä¾›ä¸€ä¸ªæ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œå¹¶ä¸æš´éœ²å…¶å†…éƒ¨çš„æ ‡è¯†

å¯ä»¥ç”¨foreachéå†çš„ç±»ï¼Œéƒ½å®ç°äº†è¿­ä»£å™¨

```C#
class TestList : IEnumerable,IEnumertor / /ç»§æ‰¿æ¥å£
{
    private int[] arr;
    public Func()
    {
        arr = new int[]{1,2,3};
    }
    
    //æ¥å£å®ç°GetEnumeratoræ–¹æ³•ï¼Œæƒ³è¦é€šè¿‡foreachéå†ï¼Œå°±å¿…é¡»å®ç°è¯¥æ–¹æ³•
}

TestList tList = new TestList();

//foreachçš„æœ¬è´¨
//1ã€å…ˆè·å–inåé¢çš„å¯¹è±¡çš„ IEnumertorï¼Œé€šè¿‡è°ƒç”¨é‡Œé¢çš„GetEnumeratoræ–¹æ³•æ¥è·å–
//2ã€æ‰§è¡Œå¾—åˆ°çš„IEnumeratorå¯¹è±¡ä¸­çš„ MoveNext æ–¹æ³•ï¼ˆç§»åŠ¨å…‰æ ‡ï¼‰
//3ã€å¦‚æœMoveNextè¿”å›trueï¼Œå°±ä¼šå»å¾—åˆ°Currentï¼ˆå½“å‰çš„å…ƒç´ ï¼‰
//4ã€ç„¶åèµ‹å€¼ç»™inå‰é¢çš„å½¢å‚item
class Test : IEnumerable, IEnumerator
{
    private int[] arr;
    public Test()
    {
        arr = new int[] { 1, 2, 3, 4, 5, 6 };
    }
    public int cursor = -1;
    public object Current
    {
        get
        {
            return arr[cursor];
        }
    }

    public IEnumerator GetEnumerator()
    {
        Reset(); 
        return this;
    }

    public bool MoveNext()
    {
        cursor++;
        return cursor < arr.Length;
    }

    public void Reset()
    {
        cursor = -1;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Test t = new Test();
        foreach(int item in t)
        {
            Console.WriteLine(item);
        }
    }
}




//è¯­æ³•ç³–å®ç°è¿­ä»£å™¨
class Test : Ienumerable
{
    private int[] arr;
    public Test()
    {
        arr = new int[]{1,2,3}
    }
    
    public Ienumerator GetEnumerator()
    {
        for(int i = 0; i < arr.Length; i++)
        {
            //yield é…åˆè¿­ä»£å™¨ä½¿ç”¨ï¼Œåç¨‹
            yield return arr[i];
        }
    }
}
```

